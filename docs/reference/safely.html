<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Capture side effects. — safely • purrr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">purrr</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/other-langs.html">Functional programming in other languages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/purrr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Capture side effects.</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/purrr/blob/master/R/output.R'><code>R/output.R</code></a></small>
    <div class="hidden name"><code>safely.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>These functions wrap functions so that instead of generating side effects
through printed output, messages, warnings, and errors, they return enhanced
output. They are all adverbs because they modify the action of a verb (a
function).</p>
    
    </div>

    <pre class="usage"><span class='fu'>safely</span>(<span class='no'>.f</span>, <span class='kw'>otherwise</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>quietly</span>(<span class='no'>.f</span>)

<span class='fu'>possibly</span>(<span class='no'>.f</span>, <span class='no'>otherwise</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>auto_browse</span>(<span class='no'>.f</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.f</th>
      <td><p>A function, formula, or atomic vector.</p>
<p>If a <strong>function</strong>, it is used as is.</p>
<p>If a <strong>formula</strong>, e.g. <code>~ .x + 2</code>, it is converted to a function. There
are three ways to refer to the arguments:</p><ul>
<li><p>For a single argument function, use <code>.</code></p></li>
<li><p>For a two argument function, use <code>.x</code> and <code>.y</code></p></li>
<li><p>For more arguments, use <code>..1</code>, <code>..2</code>, <code>..3</code> etc</p></li>
</ul>

<p>This syntax allows you to create very compact anonymous functions.</p>
<p>If <strong>character vector</strong>, <strong>numeric vector</strong>, or <strong>list</strong>, it
is converted to an extractor function. Character vectors index by name
and numeric vectors index by position; use a list to index by position
and name at different levels. Within a list, wrap strings in <code><a href='get-attr.html'>get-attr()</a></code>
to extract named attributes. If a component is not present, the value of
<code>.default</code> will be returned.</p></td>
    </tr>
    <tr>
      <th>otherwise</th>
      <td><p>Default value to use when an error occurs.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Hide errors (<code>TRUE</code>, the default), or display them
as they occur?</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>safely</code>: wrapped function instead returns a list with
components <code>result</code> and <code>error</code>. One value is always <code>NULL</code>.</p>
<p><code>quietly</code>: wrapped function instead returns a list with components
<code>result</code>, <code>output</code>, <code>messages</code> and <code>warnings</code>.</p>
<p><code>possibly</code>: wrapped function uses a default value (<code>otherwise</code>)
whenever an error occurs.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>safe_log</span> <span class='kw'>&lt;-</span> <span class='fu'>safely</span>(<span class='no'>log</span>)
<span class='fu'>safe_log</span>(<span class='fl'>10</span>)</div><div class='output co'>#&gt; $result
#&gt; [1] 2.302585
#&gt; 
#&gt; $error
#&gt; NULL
#&gt; </div><div class='input'><span class='fu'>safe_log</span>(<span class='st'>"a"</span>)</div><div class='output co'>#&gt; $result
#&gt; NULL
#&gt; 
#&gt; $error
#&gt; &lt;simpleError in log(x = x, base = base): non-numeric argument to mathematical function&gt;
#&gt; </div><div class='input'>
<span class='fu'>list</span>(<span class='st'>"a"</span>, <span class='fl'>10</span>, <span class='fl'>100</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='map.html'>map</a></span>(<span class='no'>safe_log</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='transpose.html'>transpose</a></span>()</div><div class='output co'>#&gt; $result
#&gt; $result[[1]]
#&gt; NULL
#&gt; 
#&gt; $result[[2]]
#&gt; [1] 2.302585
#&gt; 
#&gt; $result[[3]]
#&gt; [1] 4.60517
#&gt; 
#&gt; 
#&gt; $error
#&gt; $error[[1]]
#&gt; &lt;simpleError in log(x = x, base = base): non-numeric argument to mathematical function&gt;
#&gt; 
#&gt; $error[[2]]
#&gt; NULL
#&gt; 
#&gt; $error[[3]]
#&gt; NULL
#&gt; 
#&gt; </div><div class='input'>
<span class='co'># This is a bit easier to work with if you supply a default value</span>
<span class='co'># of the same type and use the simplify argument to transpose():</span>
<span class='no'>safe_log</span> <span class='kw'>&lt;-</span> <span class='fu'>safely</span>(<span class='no'>log</span>, <span class='kw'>otherwise</span> <span class='kw'>=</span> <span class='fl'>NA_real_</span>)
<span class='fu'>list</span>(<span class='st'>"a"</span>, <span class='fl'>10</span>, <span class='fl'>100</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='map.html'>map</a></span>(<span class='no'>safe_log</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='transpose.html'>transpose</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='as_vector.html'>simplify_all</a></span>()</div><div class='output co'>#&gt; $result
#&gt; [1]       NA 2.302585 4.605170
#&gt; 
#&gt; $error
#&gt; $error[[1]]
#&gt; &lt;simpleError in log(x = x, base = base): non-numeric argument to mathematical function&gt;
#&gt; 
#&gt; $error[[2]]
#&gt; NULL
#&gt; 
#&gt; $error[[3]]
#&gt; NULL
#&gt; 
#&gt; </div><div class='input'>
<span class='co'># To replace errors with a default value, use possibly().</span>
<span class='fu'>list</span>(<span class='st'>"a"</span>, <span class='fl'>10</span>, <span class='fl'>100</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='map.html'>map_dbl</a></span>(<span class='fu'>possibly</span>(<span class='no'>log</span>, <span class='fl'>NA_real_</span>))</div><div class='output co'>#&gt; [1]       NA 2.302585 4.605170</div><div class='input'>
<span class='co'># For interactive usage, auto_browse() is useful because it automatically</span>
<span class='co'># starts a browser() in the right place.</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) {
  <span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fl'>20</span>
  <span class='kw'>if</span> (<span class='no'>x</span> <span class='kw'>&gt;</span> <span class='fl'>5</span>) {
    <span class='fu'>stop</span>(<span class='st'>"!"</span>)
  } <span class='kw'>else</span> {
    <span class='no'>x</span>
  }
}
<span class='kw'>if</span> (<span class='fu'>interactive</span>()) {
  <span class='fu'><a href='map.html'>map</a></span>(<span class='fl'>1</span>:<span class='fl'>6</span>, <span class='fu'>auto_browse</span>(<span class='no'>f</span>))
}</div><div class='output co'>#&gt; Called from: eval_bare(quote(browser()), env = frame$env)</div><div class='output co'>#&gt; <span class='error'>Error in .f(...): !</span></div><div class='input'>
# It doesn't make sense to use auto_browse with primitive functions,
# because they are implemented in C so there's no useful environment
# for you to interact with.
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>purrr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>, <a href='https://www.rstudio.com'><img src='http://tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
  <p>Site built by <a href="http://pkgdown.r-lib.org">pkgdown</a>.</p>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
      </footer>
   </div>

  

  </body>
</html>

