<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • purrr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://purrr.tidyverse.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="purrr.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">purrr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/base.html">purrr &lt;-&gt; base R</a></li>
    <li><a class="dropdown-item" href="../articles/other-langs.html">Functional programming in other languages</a></li>
  </ul></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2022/12/purrr-1-0-0/">Version 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/02/purrr-0-3-0/">Version 0.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2017/08/purrr-0.2.3/">Version 0.2.3</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidyverse/purrr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/tidyverse/purrr/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="purrr-development-version">purrr (development version)<a class="anchor" aria-label="anchor" href="#purrr-development-version"></a></h2>
<ul><li>purrr gains the capacity for parallel and distributed map, powered by the mirai package. The argument <code>.parallel</code> has been added to <code><a href="../reference/map.html">map()</a></code>, <code><a href="../reference/map2.html">map2()</a></code>, <code><a href="../reference/pmap.html">pmap()</a></code> and variants to enable this. See <code><a href="../reference/parallelization.html">?parallelization</a></code> for more details (<a href="https://github.com/shikokuchuo" class="external-link">@shikokuchuo</a>, <a href="https://github.com/tidyverse/purrr/issues/1163" class="external-link">#1163</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.4" id="purrr-104">purrr 1.0.4<a class="anchor" aria-label="anchor" href="#purrr-104"></a></h2><p class="text-muted">CRAN release: 2025-02-05</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.3" id="purrr-103">purrr 1.0.3<a class="anchor" aria-label="anchor" href="#purrr-103"></a></h2>
<ul><li><p>Varies fixed to bring purrr back into compliance with R CMD check (<a href="https://github.com/shikokuchuo" class="external-link">@shikokuchuo</a>, <a href="https://github.com/jayhesselberth" class="external-link">@jayhesselberth</a>).</p></li>
<li><p>Added missing <code><a href="../reference/imap.html">imap_vec()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/1084" class="external-link">#1084</a>)</p></li>
<li><p><code><a href="../reference/list_transpose.html">list_transpose()</a></code> now asserts that it does not work on data frames (<a href="https://github.com/KimLopezGuell" class="external-link">@KimLopezGuell</a>, <a href="https://github.com/tidyverse/purrr/issues/1141" class="external-link">#1141</a>, <a href="https://github.com/tidyverse/purrr/issues/1149" class="external-link">#1149</a>), and inspects all elements to determine the correct template if not provided by the user (<a href="https://github.com/tidyverse/purrr/issues/1128" class="external-link">#1128</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.2" id="purrr-102">purrr 1.0.2<a class="anchor" aria-label="anchor" href="#purrr-102"></a></h2><p class="text-muted">CRAN release: 2023-08-10</p>
<ul><li><p>Fixed valgrind issue.</p></li>
<li><p>Deprecation infrastructure in <code><a href="../reference/map.html">map_chr()</a></code> now has much less overhead leading to improved performance (<a href="https://github.com/tidyverse/purrr/issues/1089" class="external-link">#1089</a>).</p></li>
<li><p>purrr now requires R 3.5.0.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.1" id="purrr-101">purrr 1.0.1<a class="anchor" aria-label="anchor" href="#purrr-101"></a></h2><p class="text-muted">CRAN release: 2023-01-10</p>
<ul><li><p>As of purrr 1.0.0, the <code><a href="../reference/map.html">map()</a></code> family of functions wraps all errors generated by <code>.f</code> inside an wrapper error that tracks the iteration index. As of purrr 1.0.1, this error now has a custom class (<code>purrr_error_indexed</code>), <code>location</code> and <code>name</code> fields, and is documented in <code><a href="../reference/purrr_error_indexed.html">?purrr_error_indexed</a></code> (<a href="https://github.com/tidyverse/purrr/issues/1027" class="external-link">#1027</a>).</p></li>
<li><p><code><a href="../reference/map.html">map()</a></code> errors with named inputs also report the name of the element that errored.</p></li>
<li><p>Fixed an issue where progress bars weren’t being closed when user interrupts or errors were encountered during a <code><a href="../reference/map.html">map()</a></code> call (<a href="https://github.com/tidyverse/purrr/issues/1024" class="external-link">#1024</a>).</p></li>
<li><p>Fixed an invalid C signature for <code><a href="../reference/pluck.html">pluck()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/1018" class="external-link">#1018</a>).</p></li>
<li><p>Set <code>Biarch: true</code> to build purrr on 32-bit Windows on R &lt; 4.2.0 (<a href="https://github.com/tidyverse/purrr/issues/1017" class="external-link">#1017</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="purrr-100">purrr 1.0.0<a class="anchor" aria-label="anchor" href="#purrr-100"></a></h2><p class="text-muted">CRAN release: 2022-12-20</p>
<div class="section level3">
<h3 id="breaking-changes-1-0-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-0-0"></a></h3>
<div class="section level4">
<h4 id="core-purpose-refinements-1-0-0">Core purpose refinements<a class="anchor" aria-label="anchor" href="#core-purpose-refinements-1-0-0"></a></h4>
<ul><li><p><code><a href="../reference/cross.html">cross()</a></code> and all its variants have been deprecated in favour of <code><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">tidyr::expand_grid()</a></code>. These functions were slow and buggy and we no longer think they are the right approach to solving this problem. See <a href="https://github.com/tidyverse/purrr/issues/768" class="external-link">#768</a> for more information.</p></li>
<li><p><code><a href="../reference/update_list.html">update_list()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/858" class="external-link">#858</a>) and <code><a href="../reference/rerun.html">rerun()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/877" class="external-link">#877</a>), and the use of tidyselect with <code><a href="../reference/map_if.html">map_at()</a></code> and friends (<a href="https://github.com/tidyverse/purrr/issues/874" class="external-link">#874</a>) have been deprecated. These functions use some form of non-standard evaluation which we now believe is a poor fit for purrr.</p></li>
<li><p>The <code>lift_*</code> family of functions has been deprecated. We no longer believe these to be a good fit for purrr because they rely on a style of function manipulation that is very uncommon in R code (<a href="https://github.com/tidyverse/purrr/issues/871" class="external-link">#871</a>).</p></li>
<li><p><code><a href="../reference/prepend.html">prepend()</a></code>, <code><a href="../reference/rdunif.html">rdunif()</a></code>, <code><a href="../reference/rbernoulli.html">rbernoulli()</a></code>, <code><a href="../reference/when.html">when()</a></code>, and <code><a href="../reference/along.html">list_along()</a></code> have all been deprecated (<a href="https://github.com/tidyverse/purrr/issues/925" class="external-link">#925</a>). It’s now clear that they don’t align with the core purpose of purrr.</p></li>
<li><p><code><a href="../reference/splice.html">splice()</a></code> is deprecated because we no longer believe that automatic splicing makes for good UI. Instead use <code>list2()</code> + <code>!!!</code> or <code><a href="../reference/list_flatten.html">list_flatten()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/869" class="external-link">#869</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="mapping-1-0-0">Mapping<a class="anchor" aria-label="anchor" href="#mapping-1-0-0"></a></h4>
<ul><li><p>Use of map functions with expressions, calls, and pairlists has been deprecated (<a href="https://github.com/tidyverse/purrr/issues/961" class="external-link">#961</a>).</p></li>
<li><p>All map <code>_raw()</code> variants have been deprecated because they are of limited use and you can now use <code><a href="../reference/map.html">map_vec()</a></code> instead (<a href="https://github.com/tidyverse/purrr/issues/903" class="external-link">#903</a>).</p></li>
<li><p>In <code><a href="../reference/map.html">map_chr()</a></code>, automatic conversion from logical, integer, and double to character is now deprecated. Use an explicit <code><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character()</a></code> if needed (<a href="https://github.com/tidyverse/purrr/issues/904" class="external-link">#904</a>).</p></li>
<li><p>Errors from <code>.f</code> are now wrapped in an additional class that gives information about where the error occurred (<a href="https://github.com/tidyverse/purrr/issues/945" class="external-link">#945</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="deprecation-next-steps-1-0-0">Deprecation next steps<a class="anchor" aria-label="anchor" href="#deprecation-next-steps-1-0-0"></a></h4>
<ul><li><p><code>as_function()</code> and the <code>...f</code> argument to <code><a href="../reference/partial.html">partial()</a></code> are no longer supported. They have been defunct for quite some time.</p></li>
<li><p>Soft deprecated functions: <code>%@%</code>, <code><a href="../reference/reduce_right.html">reduce_right()</a></code>, <code><a href="../reference/reduce_right.html">reduce2_right()</a></code>, <code><a href="../reference/reduce_right.html">accumulate_right()</a></code> are now fully deprecated. Similarly, the <code>.lazy</code>, <code>.env</code>, and <code>.first</code> arguments to <code><a href="../reference/partial.html">partial()</a></code>, and the <code>.right</code> argument to <code><a href="../reference/detect.html">detect()</a></code> and <code><a href="../reference/detect.html">detect_index()</a></code> are fully deprecated. Removing elements with <code>NULL</code> in <code><a href="../reference/list_assign.html">list_modify()</a></code> and <code><a href="../reference/list_assign.html">list_merge()</a></code> is now fully deprecated.</p></li>
<li><p><code>is_numeric()</code> and <code>is_scalar_numeric()</code> have been removed. They have been deprecated since purrr 0.2.3 (Sep 2017).</p></li>
<li><p><code>invoke_*()</code> is now deprecated. It was superseded in 0.3.0 (Jan 2019) and 3.5 years later, we have decided to deprecate it as part of the API refinement in the 1.0.0 release.</p></li>
<li><p><code>map_call()</code> has been removed. It was made defunct in 0.3.0 (Jan 2019).</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="new-features-1-0-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-0-0"></a></h3>
<ul><li><p><code>*_at()</code> can now take a function (or formula) that’s passed the vector of element names and returns the elements to select.</p></li>
<li><p>New <code><a href="../reference/map.html">map_vec()</a></code>, <code><a href="../reference/map2.html">map2_vec()</a></code>, and <code><a href="../reference/pmap.html">pmap_vec()</a></code> work on all types of vectors, extending <code><a href="../reference/map.html">map_lgl()</a></code>, <code><a href="../reference/map.html">map_int()</a></code>, and friends so that you can easily work with dates, factors, date-times and more (<a href="https://github.com/tidyverse/purrr/issues/435" class="external-link">#435</a>).</p></li>
<li><p>New <code><a href="../reference/keep_at.html">keep_at()</a></code> and <code><a href="../reference/keep_at.html">discard_at()</a></code> that work like <code><a href="../reference/keep.html">keep()</a></code> and <code><a href="../reference/keep.html">discard()</a></code> but operation on element names rather than element contents (<a href="https://github.com/tidyverse/purrr/issues/817" class="external-link">#817</a>).</p></li>
<li><p>Some mapping functions have now a <code>.progress</code> argument to create a progress bar. See <code><a href="../reference/progress_bars.html">?progress_bars</a></code> (<a href="https://github.com/tidyverse/purrr/issues/149" class="external-link">#149</a>).</p></li>
<li><p>purrr is now licensed as MIT (<a href="https://github.com/tidyverse/purrr/issues/805" class="external-link">#805</a>).</p></li>
<li><p><code><a href="../reference/modify.html">modify()</a></code>, <code><a href="../reference/modify.html">modify_if()</a></code>, <code><a href="../reference/modify.html">modify_at()</a></code>, and <code><a href="../reference/modify.html">modify2()</a></code> are no longer generics. We have discovered a simple implementation that no longer requires genericity and methods were only provided by a very small number of packages (<a href="https://github.com/tidyverse/purrr/issues/894" class="external-link">#894</a>).</p></li>
<li><p>purrr now uses the base pipe (<code>|&gt;</code>) and anonymous function short hand (<code>\(x)</code>), in all examples. This means that examples will no longer work in R 4.0 and earlier so in those versions of R, the examples are automatically converted to a regular section with a note that they might not work (<a href="https://github.com/tidyverse/purrr/issues/936" class="external-link">#936</a>).</p></li>
<li><p>When map functions fail, they now report the element they failed at (<a href="https://github.com/tidyverse/purrr/issues/945" class="external-link">#945</a>).</p></li>
<li><p>New <code><a href="../reference/modify_tree.html">modify_tree()</a></code> for recursively modifying nested data structures (<a href="https://github.com/tidyverse/purrr/issues/720" class="external-link">#720</a>).</p></li>
</ul><div class="section level4">
<h4 id="flattening-and-simplification-1-0-0">Flattening and simplification<a class="anchor" aria-label="anchor" href="#flattening-and-simplification-1-0-0"></a></h4>
<ul><li><p>New <code><a href="../reference/list_c.html">list_c()</a></code>, <code><a href="../reference/list_c.html">list_rbind()</a></code>, and <code><a href="../reference/list_c.html">list_cbind()</a></code> make it easy to <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>, <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code>, or <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind()</a></code> all of the elements in a list.</p></li>
<li><p>New <code><a href="../reference/list_simplify.html">list_simplify()</a></code> reduces a list of length-1 vectors to a simpler atomic or S3 vector (<a href="https://github.com/tidyverse/purrr/issues/900" class="external-link">#900</a>).</p></li>
<li><p>New <code><a href="../reference/list_transpose.html">list_transpose()</a></code> which automatically simplifies if possible (<a href="https://github.com/tidyverse/purrr/issues/875" class="external-link">#875</a>).</p></li>
<li><p><code><a href="../reference/accumulate.html">accumulate()</a></code> and <code><a href="../reference/accumulate.html">accumulate2()</a></code> now both simplify the output if possible using vctrs. New arguments <code>simplify</code> and <code>ptype</code> allow you to control the details of simplification (<a href="https://github.com/tidyverse/purrr/issues/774" class="external-link">#774</a>, <a href="https://github.com/tidyverse/purrr/issues/809" class="external-link">#809</a>).</p></li>
<li><p><code><a href="../reference/flatten.html">flatten()</a></code> and friends are superseded in favour of <code><a href="../reference/list_flatten.html">list_flatten()</a></code>, <code><a href="../reference/list_c.html">list_c()</a></code>, <code><a href="../reference/list_c.html">list_cbind()</a></code>, and <code><a href="../reference/list_c.html">list_rbind()</a></code>.</p></li>
<li><p><code>*_dfc()</code> and <code>*_dfr()</code> have been superseded in favour of using the appropriate map function along with <code><a href="../reference/list_c.html">list_rbind()</a></code> or <code><a href="../reference/list_c.html">list_cbind()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/912" class="external-link">#912</a>).</p></li>
<li><p><code><a href="../reference/as_vector.html">simplify()</a></code>, <code><a href="../reference/as_vector.html">simplify_all()</a></code>, and <code><a href="../reference/as_vector.html">as_vector()</a></code> have been superseded in favour of <code><a href="../reference/list_simplify.html">list_simplify()</a></code>. It provides a more consistent definition of simplification (<a href="https://github.com/tidyverse/purrr/issues/900" class="external-link">#900</a>).</p></li>
<li><p><code><a href="../reference/transpose.html">transpose()</a></code> has been superseded in favour of <code><a href="../reference/list_transpose.html">list_transpose()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/875" class="external-link">#875</a>). It has built-in simplification.</p></li>
</ul></div>
<div class="section level4">
<h4 id="tidyverse-consistency-1-0-0">Tidyverse consistency<a class="anchor" aria-label="anchor" href="#tidyverse-consistency-1-0-0"></a></h4>
<ul><li>
<p><code>_lgl()</code>, <code>_int()</code>, <code>_int()</code>, and <code>_dbl()</code> now use the same (strict) coercion methods as vctrs (<a href="https://github.com/tidyverse/purrr/issues/904" class="external-link">#904</a>). This means that:</p>
<ul><li><p><code>map_chr(TRUE, identity)</code>, <code>map_chr(0L, identity)</code>, and <code>map_chr(1L, identity)</code> are deprecated because we now believe that converting a logical/integer/double to a character vector should require an explicit coercion.</p></li>
<li><p><code>map_int(1.5, identity)</code> now fails because we believe that silently truncating doubles to integers is dangerous. But note that <code>map_int(1, identity)</code> still works since no numeric precision is lost.</p></li>
<li><p><code>map_int(c(TRUE, FALSE), identity)</code>, <code>map_dbl(c(TRUE, FALSE), identity)</code>, <code>map_lgl(c(1L, 0L), identity)</code> and <code>map_lgl(c(1, 0), identity)</code> now succeed because 1/TRUE and 0/FALSE should be interchangeable.</p></li>
</ul></li>
<li><p><code><a href="../reference/map2.html">map2()</a></code>, <code><a href="../reference/modify.html">modify2()</a></code>, and <code><a href="../reference/pmap.html">pmap()</a></code> now use tidyverse recycling rules where vectors of length 1 are recycled to any size but all others must have the same length (<a href="https://github.com/tidyverse/purrr/issues/878" class="external-link">#878</a>).</p></li>
<li><p><code><a href="../reference/map2.html">map2()</a></code> and <code><a href="../reference/pmap.html">pmap()</a></code> now recycle names of their first input if needed (<a href="https://github.com/tidyverse/purrr/issues/783" class="external-link">#783</a>).</p></li>
<li><p><code><a href="../reference/modify.html">modify()</a></code>, <code><a href="../reference/modify.html">modify_if()</a></code>, and <code><a href="../reference/modify.html">modify_at()</a></code> have been reimplemented using vctrs principles. This shouldn’t have an user facing impact, but it does make the implementation much simpler.</p></li>
</ul></div>
<div class="section level4">
<h4 id="plucking-1-0-0">Plucking<a class="anchor" aria-label="anchor" href="#plucking-1-0-0"></a></h4>
<ul><li><p><code><a href="../reference/pluck_depth.html">vec_depth()</a></code> is now <code><a href="../reference/pluck_depth.html">pluck_depth()</a></code> and works with more types of input (<a href="https://github.com/tidyverse/purrr/issues/818" class="external-link">#818</a>).</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> now requires indices to be length 1 (<a href="https://github.com/tidyverse/purrr/issues/813" class="external-link">#813</a>). It also now reports the correct type if you supply an unexpected index.</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> now accepts negative integers, indexing from the right (<a href="https://github.com/tidyverse/purrr/issues/603" class="external-link">#603</a>).</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> and <code><a href="../reference/chuck.html">chuck()</a></code> now fail if you provide named inputs to … (<a href="https://github.com/tidyverse/purrr/issues/788" class="external-link">#788</a>).</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> no longer replaces 0-length vectors with <code>default</code>; it now only applies absent and <code>NULL</code> components (<a href="https://github.com/tidyverse/purrr/issues/480" class="external-link">#480</a>).</p></li>
<li><p><code>pluck&lt;-</code>/<code><a href="../reference/modify_in.html">assign_in()</a></code> can now modify non-existing locations (<a href="https://github.com/tidyverse/purrr/issues/704" class="external-link">#704</a>).</p></li>
</ul></div>
<div class="section level4">
<h4 id="setting-with-null-1-0-0">Setting with NULL<a class="anchor" aria-label="anchor" href="#setting-with-null-1-0-0"></a></h4>
<ul><li><p><code>pluck&lt;-</code>/<code><a href="../reference/modify_in.html">assign_in()</a></code> now sets elements to <code>NULL</code> rather than removing them (<a href="https://github.com/tidyverse/purrr/issues/636" class="external-link">#636</a>). Now use the explicit <code><a href="https://rlang.r-lib.org/reference/zap.html" class="external-link">zap()</a></code> if you want to remove elements.</p></li>
<li><p><code><a href="../reference/modify.html">modify()</a></code>, <code><a href="../reference/modify.html">modify2()</a></code>, and <code><a href="../reference/modify.html">modify_if()</a></code> now correctly handle <code>NULL</code>s in replacement values (<a href="https://github.com/tidyverse/purrr/issues/655" class="external-link">#655</a>, <a href="https://github.com/tidyverse/purrr/issues/746" class="external-link">#746</a>, <a href="https://github.com/tidyverse/purrr/issues/753" class="external-link">#753</a>).</p></li>
<li><p><code><a href="../reference/list_assign.html">list_modify()</a></code>’s interface has been standardised. Modifying with <code>NULL</code> now always creates a <code>NULL</code> in the output (<a href="https://github.com/tidyverse/purrr/issues/810" class="external-link">#810</a>)</p></li>
</ul></div>
<div class="section level4">
<h4 id="list_-functions-1-0-0">
<code>list_</code> functions<a class="anchor" aria-label="anchor" href="#list_-functions-1-0-0"></a></h4>
<ul><li><p>New <code><a href="../reference/list_assign.html">list_assign()</a></code> which is similar to <code><a href="../reference/list_assign.html">list_modify()</a></code> but doesn’t work recursively (<a href="https://github.com/tidyverse/purrr/issues/822" class="external-link">#822</a>).</p></li>
<li><p><code><a href="../reference/list_assign.html">list_modify()</a></code> no longer recurses into data frames (and other objects built on top of lists that are fundamentally non-list like) (<a href="https://github.com/tidyverse/purrr/issues/810" class="external-link">#810</a>). You can revert to the previous behaviour by setting <code>.is_node = is.list</code>.</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-1-0-0">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-1-0-0"></a></h3>
<ul><li><p><code>capture_output()</code> correctly uses <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">conditionMessage()</a></code> instead of directly interrogating the <code>message</code> field (<a href="https://github.com/tidyverse/purrr/issues/1010" class="external-link">#1010</a>).</p></li>
<li><p><code><a href="../reference/modify.html">modify()</a></code> no longer works with calls or pairlists.</p></li>
<li><p><code><a href="../reference/map_depth.html">modify_depth()</a></code> is no longer a generic. This makes it more consistent with <code><a href="../reference/map_depth.html">map_depth()</a></code>.</p></li>
<li><p><code><a href="../reference/map_depth.html">map_depth()</a></code> and <code><a href="../reference/map_depth.html">modify_depth()</a></code> have a new <code>is_node</code> argument that allows you to control what counts as a level. The default uses <code>vec_is_list()</code> to avoid recursing into rich S3 objects like linear models or data.frames (<a href="https://github.com/tidyverse/purrr/issues/958" class="external-link">#958</a>, <a href="https://github.com/tidyverse/purrr/issues/920" class="external-link">#920</a>).</p></li>
<li><p><code><a href="../reference/map_depth.html">map_depth()</a></code> and <code><a href="../reference/map_depth.html">modify_depth()</a></code> now correctly recurse at depth 1.</p></li>
<li><p><code><a href="../reference/as_mapper.html">as_mapper()</a></code> is now around twice as fast when used with character, integer, or list (<a href="https://github.com/tidyverse/purrr/issues/820" class="external-link">#820</a>).</p></li>
<li><p><code><a href="../reference/possibly.html">possibly()</a></code> now defaults <code>otherwise</code> to NULL.</p></li>
<li><p><code>modify_if(.else)</code> is now actually evaluated for atomic vectors (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/purrr/issues/701" class="external-link">#701</a>).</p></li>
<li><p><code><a href="../reference/lmap.html">lmap_if()</a></code> correctly handles <code>.else</code> functions (<a href="https://github.com/tidyverse/purrr/issues/847" class="external-link">#847</a>).</p></li>
<li><p><code><a href="../reference/every.html">every()</a></code> now correctly propagates missing values using the same rules as <code>&amp;&amp;</code> (<a href="https://github.com/tidyverse/purrr/issues/751" class="external-link">#751</a>). Internally, it has become a wrapper around <code>&amp;&amp;</code>. This makes it consistent with <code>&amp;&amp;</code> and also with <code><a href="../reference/every.html">some()</a></code> which has always been a wrapper around <code>||</code> with the same propagation rules.</p></li>
<li><p><code><a href="../reference/every.html">every()</a></code> and <code><a href="../reference/every.html">some()</a></code> now properly check the return value of their predicate function. It must now return a <code>TRUE</code>, <code>FALSE</code>, or <code>NA</code>.</p></li>
<li><p>Greatly improved performance of functions created with <code><a href="../reference/partial.html">partial()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/715" class="external-link">#715</a>). Their invocation is now as fast as for functions creating manually.</p></li>
<li><p><code><a href="../reference/partial.html">partial()</a></code> no longer inlines the function in the call stack. This fixes issues when <code><a href="../reference/partial.html">partial()</a></code> is used with <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> for instance (<a href="https://github.com/tidyverse/purrr/issues/707" class="external-link">#707</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.5" id="purrr-035">purrr 0.3.5<a class="anchor" aria-label="anchor" href="#purrr-035"></a></h2><p class="text-muted">CRAN release: 2022-10-06</p>
<ul><li>Fixes for CRAN checks.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.4" id="purrr-034">purrr 0.3.4<a class="anchor" aria-label="anchor" href="#purrr-034"></a></h2><p class="text-muted">CRAN release: 2020-04-17</p>
<ul><li><p>Fixed issue in <code><a href="../reference/list_assign.html">list_modify()</a></code> that prevented lists from being removed with <code><a href="https://rlang.r-lib.org/reference/zap.html" class="external-link">zap()</a></code> (<a href="https://github.com/adamroyjones" class="external-link">@adamroyjones</a>, <a href="https://github.com/tidyverse/purrr/issues/777" class="external-link">#777</a>).</p></li>
<li><p>Added documentation for exporting functions created with purrr adverb (<a href="https://github.com/njtierney" class="external-link">@njtierney</a>, <a href="https://github.com/tidyverse/purrr/issues/668" class="external-link">#668</a>). See <code>?faq-adverbs-export</code>.</p></li>
<li><p>Added <code><a href="../reference/every.html">none()</a></code>, which tests that a predicate is false for all elements (the opposite of <code><a href="../reference/every.html">every()</a></code>) (<a href="https://github.com/AliciaSchep" class="external-link">@AliciaSchep</a>, <a href="https://github.com/tidyverse/purrr/issues/735" class="external-link">#735</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.3" id="purrr-033">purrr 0.3.3<a class="anchor" aria-label="anchor" href="#purrr-033"></a></h2><p class="text-muted">CRAN release: 2019-10-18</p>
<ul><li><p>Maintenance release.</p></li>
<li><p>The documentation of <code><a href="../reference/map.html">map()</a></code> and its variants has been improved by <a href="https://github.com/surdina" class="external-link">@surdina</a> as part of the Tidyverse Developer Day (<a href="https://github.com/surdina" class="external-link">@surdina</a>, <a href="https://github.com/tidyverse/purrr/issues/671" class="external-link">#671</a>).</p></li>
<li><p>purrr now depends on R 3.2 or greater.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.2" id="purrr-032">purrr 0.3.2<a class="anchor" aria-label="anchor" href="#purrr-032"></a></h2><p class="text-muted">CRAN release: 2019-03-15</p>
<ul><li>Fix protection issues reported by rchk.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.1" id="purrr-031">purrr 0.3.1<a class="anchor" aria-label="anchor" href="#purrr-031"></a></h2><p class="text-muted">CRAN release: 2019-03-03</p>
<ul><li><p><code><a href="../reference/reduce.html">reduce()</a></code> now forces arguments (<a href="https://github.com/tidyverse/purrr/issues/643" class="external-link">#643</a>).</p></li>
<li><p>Fixed an issue in <code><a href="../reference/partial.html">partial()</a></code> with generic functions (<a href="https://github.com/tidyverse/purrr/issues/647" class="external-link">#647</a>).</p></li>
<li><p><code><a href="../reference/negate.html">negate()</a></code> now works with generic functions and functions with early returns.</p></li>
<li><p><code><a href="../reference/compose.html">compose()</a></code> now works with generic functions again (<a href="https://github.com/tidyverse/purrr/issues/629" class="external-link">#629</a>, <a href="https://github.com/tidyverse/purrr/issues/639" class="external-link">#639</a>). Its set of unit tests was expanded to cover many edge cases.</p></li>
<li><p><code><a href="../reference/prepend.html">prepend()</a></code> now works with empty lists (<a href="https://github.com/czeildi" class="external-link">@czeildi</a>, <a href="https://github.com/tidyverse/purrr/issues/637" class="external-link">#637</a>)</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="purrr-030">purrr 0.3.0<a class="anchor" aria-label="anchor" href="#purrr-030"></a></h2><p class="text-muted">CRAN release: 2019-01-27</p>
<div class="section level3">
<h3 id="breaking-changes-0-3-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-3-0"></a></h3>
<ul><li>
<p><code><a href="../reference/modify.html">modify()</a></code> and variants are now wrapping <code>[[&lt;-</code> instead of <code>[&lt;-</code>. This change increases the genericity of these functions but might cause different behaviour in some cases.</p>
<p>For instance, the <code>[[&lt;-</code> for data frames is stricter than the <code>[&lt;-</code> method and might throw errors instead of warnings. This is the case when assigning a longer vector than the number of rows. <code>[&lt;-</code> truncates the vector with a warning, <code>[[&lt;-</code> fails with an error (as is appropriate).</p>
</li>
<li><p><code><a href="../reference/modify.html">modify()</a></code> and variants now return the same type as the input when the input is an atomic vector.</p></li>
<li>
<p>All functionals taking predicate functions (like <code><a href="../reference/keep.html">keep()</a></code>, <code><a href="../reference/detect.html">detect()</a></code>, <code><a href="../reference/every.html">some()</a></code>) got stricter. Predicate functions must now return a single <code>TRUE</code> or <code>FALSE</code>.</p>
<p>This change is meant to detect problems early with a more meaningful error message.</p>
</li>
</ul></div>
<div class="section level3">
<h3 id="plucking-0-3-0">Plucking<a class="anchor" aria-label="anchor" href="#plucking-0-3-0"></a></h3>
<ul><li><p>New <code><a href="../reference/chuck.html">chuck()</a></code> function. This is a strict variant of <code><a href="../reference/pluck.html">pluck()</a></code> that throws errors when an element does not exist instead of returning <code>NULL</code> (<a href="https://github.com/daniel-barnett" class="external-link">@daniel-barnett</a>, <a href="https://github.com/tidyverse/purrr/issues/482" class="external-link">#482</a>).</p></li>
<li><p>New <code><a href="../reference/modify_in.html">assign_in()</a></code> and <code>pluck&lt;-</code> functions. They modify a data structure at an existing pluck location.</p></li>
<li><p>New <code><a href="../reference/modify_in.html">modify_in()</a></code> function to map a function at a pluck location.</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> now dispatches properly with S3 vectors. The vector class must implement a <code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code> method for numeric indexing and a <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code> method for string indexing.</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> now supports primitive functions (<a href="https://github.com/tidyverse/purrr/issues/404" class="external-link">#404</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="mapping-0-3-0">Mapping<a class="anchor" aria-label="anchor" href="#mapping-0-3-0"></a></h3>
<ul><li><p>New <code>.else</code> argument for <code><a href="../reference/map_if.html">map_if()</a></code> and <code><a href="../reference/modify.html">modify_if()</a></code>. They take an alternative function that is mapped over elements of the input for which the predicate function returns <code>FALSE</code> (<a href="https://github.com/tidyverse/purrr/issues/324" class="external-link">#324</a>).</p></li>
<li><p><code><a href="../reference/reduce.html">reduce()</a></code>, <code><a href="../reference/reduce.html">reduce2()</a></code>, <code><a href="../reference/accumulate.html">accumulate()</a></code>, and <code><a href="../reference/accumulate.html">accumulate2()</a></code> now terminate early when the function returns a value wrapped with <code><a href="https://rlang.r-lib.org/reference/done.html" class="external-link">done()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/253" class="external-link">#253</a>). When an empty <code><a href="https://rlang.r-lib.org/reference/done.html" class="external-link">done()</a></code> is returned, the value at the last iteration is returned instead.</p></li>
<li>
<p>Functions taking predicates (<code><a href="../reference/map_if.html">map_if()</a></code>, <code><a href="../reference/keep.html">keep()</a></code>, <code><a href="../reference/every.html">some()</a></code>, <code><a href="../reference/every.html">every()</a></code>, <code><a href="../reference/keep.html">keep()</a></code>, etc) now fail with an informative message when the return value is not <code>TRUE</code> or <code>FALSE</code> (<a href="https://github.com/tidyverse/purrr/issues/470" class="external-link">#470</a>).</p>
<p>This is a breaking change for <code><a href="../reference/every.html">every()</a></code> and <code><a href="../reference/every.html">some()</a></code> which were documented to be more liberal in the values they accepted as logical (any vector was considered <code>TRUE</code> if not a single <code>FALSE</code> value, no matter its length). These functions signal soft-deprecation warnings instead of a hard failure.</p>
<p>Edit (purr 0.4.0): <code><a href="../reference/every.html">every()</a></code> and <code><a href="../reference/every.html">some()</a></code> never issued deprecation warnings because of a technical issue. We didn’t fix the warnings in the end, and using predicates returning <code>NA</code> is no longer considered deprecated. If you need to use <code><a href="../reference/every.html">every()</a></code> and <code><a href="../reference/every.html">some()</a></code> in contexts where <code>NA</code> propagation is unsafe, e.g. in <code>if ()</code> conditions, make sure to use safe predicate functions like <code>is_true()</code>.</p>
</li>
<li><p><code><a href="../reference/modify.html">modify()</a></code> and variants are now implemented using <code><a href="https://rdrr.io/r/base/length.html" class="external-link">length()</a></code>, <code>[[</code>, and <code>[[&lt;-</code> methods. This implementation should be compatible with most vector classes.</p></li>
<li><p>New <code><a href="../reference/modify.html">modify2()</a></code> and <code><a href="../reference/modify.html">imodify()</a></code> functions. These work like <code><a href="../reference/map.html">map()</a></code> and <code><a href="../reference/imap.html">imap()</a></code> but preserve the type of <code>.x</code> in the return value.</p></li>
<li><p><code><a href="../reference/pmap.html">pmap()</a></code> and <code><a href="../reference/pmap.html">pwalk()</a></code> now preserve class for inputs of <code>factor</code>, <code>Date</code>, <code>POSIXct</code> and other atomic S3 classes with an appropriate <code>[[</code> method (<a href="https://github.com/tidyverse/purrr/issues/358" class="external-link">#358</a>, <a href="https://github.com/mikmart" class="external-link">@mikmart</a>).</p></li>
<li><p><code><a href="../reference/modify.html">modify()</a></code>, <code><a href="../reference/modify.html">modify_if()</a></code> and <code><a href="../reference/modify.html">modify_at()</a></code> now preserve the class of atomic vectors instead of promoting them to lists. New S3 methods are provided for character, logical, double, and integer classes (<a href="https://github.com/t-kalinowski" class="external-link">@t-kalinowski</a>, <a href="https://github.com/tidyverse/purrr/issues/417" class="external-link">#417</a>).</p></li>
<li><p>By popular request, <code><a href="../reference/at_depth.html">at_depth()</a></code> has been brought back as <code><a href="../reference/map_depth.html">map_depth()</a></code>. Like <code><a href="../reference/map_depth.html">modify_depth()</a></code>, it applies a function at a specified level of a data structure. However, it transforms all traversed vectors up to <code>.depth</code> to bare lists (<a href="https://github.com/tidyverse/purrr/issues/381" class="external-link">#381</a>).</p></li>
<li><p><code><a href="../reference/map_if.html">map_at()</a></code>, <code><a href="../reference/modify.html">modify_at()</a></code> and <code><a href="../reference/lmap.html">lmap_at()</a></code> accept negative values for <code>.at</code>, ignoring elements at those positions.</p></li>
<li><p><code><a href="../reference/map.html">map()</a></code> and <code><a href="../reference/modify.html">modify()</a></code> now work with calls and pairlists (<a href="https://github.com/tidyverse/purrr/issues/412" class="external-link">#412</a>).</p></li>
<li><p><code><a href="../reference/map_depth.html">modify_depth()</a></code> now modifies atomic leaves as well. This makes <code>modify_depth(x, 1, fn)</code> equivalent to <code>modify(x, fn)</code> (<a href="https://github.com/tidyverse/purrr/issues/359" class="external-link">#359</a>).</p></li>
<li><p>New <code><a href="../reference/accumulate.html">accumulate2()</a></code> function which is to <code><a href="../reference/accumulate.html">accumulate()</a></code> what <code><a href="../reference/reduce.html">reduce2()</a></code> is to <code><a href="../reference/reduce.html">reduce()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="rates-0-3-0">Rates<a class="anchor" aria-label="anchor" href="#rates-0-3-0"></a></h3>
<ul><li><p>New <code><a href="../reference/rate-helpers.html">rate_backoff()</a></code> and <code><a href="../reference/rate-helpers.html">rate_delay()</a></code> functions to create rate objects. You can pass rates to <code><a href="../reference/insistently.html">insistently()</a></code>, <code><a href="../reference/slowly.html">slowly()</a></code>, or the lower level function <code><a href="../reference/rate_sleep.html">rate_sleep()</a></code>. This will cause a function to wait for a given amount of time with exponential backoff (increasingly larger waiting times) or for a constant delay.</p></li>
<li>
<p><code>insistently(f)</code> modifies a function, <code>f</code>, so that it is repeatedly called until it succeeds (<a href="https://github.com/richierocks" class="external-link">@richierocks</a>, <a href="https://github.com/ijlyttle" class="external-link">@ijlyttle</a>).</p>
<p><code><a href="../reference/slowly.html">slowly()</a></code> modifies a function so that it waits for a given amount of time between calls.</p>
</li>
</ul></div>
<div class="section level3">
<h3 id="partial-0-3-0"><code>partial()</code><a class="anchor" aria-label="anchor" href="#partial-0-3-0"></a></h3>
<p>The interface of <code><a href="../reference/partial.html">partial()</a></code> has been simplified. It now supports quasiquotation to control the timing of evaluation, and the <code><a href="https://rlang.r-lib.org/reference/call_modify.html" class="external-link">rlang::call_modify()</a></code> syntax to control the position of partialised arguments.</p>
<ul><li>
<p><code><a href="../reference/partial.html">partial()</a></code> now supports empty <code>... =</code> argument to specify the position of future arguments, relative to partialised ones. This syntax is borrowed from (and implemented with) <code><a href="https://rlang.r-lib.org/reference/call_modify.html" class="external-link">rlang::call_modify()</a></code>.</p>
<p>To prevent partial matching of <code>...</code> on <code>...f</code>, the latter has been renamed to <code>.f</code>, which is more consistent with other purrr function signatures.</p>
</li>
<li><p><code><a href="../reference/partial.html">partial()</a></code> now supports quasiquotation. When you unquote an argument, it is evaluated only once at function creation time. This is more flexible than the <code>.lazy</code> argument since you can control the timing of evaluation for each argument. Consequently, <code>.lazy</code> is soft-deprecated (<a href="https://github.com/tidyverse/purrr/issues/457" class="external-link">#457</a>).</p></li>
<li><p>Fixed an infinite loop when partialised function is given the same name as the original function (<a href="https://github.com/tidyverse/purrr/issues/387" class="external-link">#387</a>).</p></li>
<li><p><code><a href="../reference/partial.html">partial()</a></code> now calls <code>as_closure()</code> on primitive functions to ensure argument matching (<a href="https://github.com/tidyverse/purrr/issues/360" class="external-link">#360</a>).</p></li>
<li>
<p>The <code>.lazy</code> argument of <code><a href="../reference/partial.html">partial()</a></code> is soft-deprecated in favour of quasiquotation:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Before</span></span>
<span><span class="fu"><a href="../reference/partial.html">partial</a></span><span class="op">(</span><span class="va">fn</span>, u <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, .lazy <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># After</span></span>
<span><span class="fu"><a href="../reference/partial.html">partial</a></span><span class="op">(</span><span class="va">fn</span>, u <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, n <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>  <span class="co"># All constant</span></span>
<span><span class="fu"><a href="../reference/partial.html">partial</a></span><span class="op">(</span><span class="va">fn</span>, u <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>    <span class="co"># First constant</span></span></code></pre></div>
</li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-fixes-0-3-0">Minor improvements and fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-fixes-0-3-0"></a></h3>
<ul><li><p>The tibble package is now in Suggests rather than Imports. This brings the hard dependency of purrr to just rlang and magrittr.</p></li>
<li><p><code><a href="../reference/compose.html">compose()</a></code> now returns an identity function when called without inputs.</p></li>
<li><p>Functions created with <code><a href="../reference/compose.html">compose()</a></code> now have the same formal parameters as the first function to be called. They also feature a more informative print method that prints all composed functions in turn (<a href="https://github.com/egnha" class="external-link">@egnha</a>, <a href="https://github.com/tidyverse/purrr/issues/366" class="external-link">#366</a>).</p></li>
<li><p>New <code>.dir</code> argument in <code><a href="../reference/compose.html">compose()</a></code>. When set to <code>"forward"</code>, the functions are composed from left to right rather than right to left.</p></li>
<li><p><code><a href="../reference/list_assign.html">list_modify()</a></code> now supports the <code><a href="https://rlang.r-lib.org/reference/zap.html" class="external-link">zap()</a></code> sentinel (reexported from rlang) to remove elements from lists. Consequently, removing elements with the ambiguous sentinel <code>NULL</code> is soft-deprecated.</p></li>
<li><p>The requirements of <code><a href="../reference/list_assign.html">list_modify()</a></code> and <code><a href="../reference/list_assign.html">list_merge()</a></code> have been relaxed. Previously it required both the modified lists and the inputs to be either named or unnamed. This restriction now only applies to inputs in <code>...</code>. When inputs are all named, they are matched to the list by name. When they are all unnamed, they are matched positionally. Otherwise, this is an error.</p></li>
<li><p>Fixed ordering of names returned by <code><a href="../reference/reduce_right.html">accumulate_right()</a></code> output. They now correspond to the order of inputs.</p></li>
<li><p>Fixed names of <code><a href="../reference/accumulate.html">accumulate()</a></code> output when <code>.init</code> is supplied.</p></li>
<li><p><code><a href="../reference/compose.html">compose()</a></code> now supports composition with lambdas (<a href="https://github.com/ColinFay" class="external-link">@ColinFay</a>, <a href="https://github.com/tidyverse/purrr/issues/556" class="external-link">#556</a>)</p></li>
<li><p>Fixed a <code><a href="../reference/pmap.html">pmap()</a></code> crash with empty lists on the Win32 platform (<a href="https://github.com/tidyverse/purrr/issues/565" class="external-link">#565</a>).</p></li>
<li><p><code>modify_depth</code> now has <code>.ragged</code> argument evaluates correctly to <code>TRUE</code> by default when <code>.depth &lt; 0</code> (<a href="https://github.com/cderv" class="external-link">@cderv</a>, <a href="https://github.com/tidyverse/purrr/issues/530" class="external-link">#530</a>).</p></li>
<li><p><code><a href="../reference/accumulate.html">accumulate()</a></code> now inherits names from their first input (<a href="https://github.com/AshesITR" class="external-link">@AshesITR</a>, <a href="https://github.com/tidyverse/purrr/issues/446" class="external-link">#446</a>).</p></li>
<li><p><code><a href="../reference/attr_getter.html">attr_getter()</a></code> no longer uses partial matching. For example, if an <code>x</code> object has a <code>labels</code> attribute but no <code>label</code> attribute, <code>attr_getter("label")(x)</code> will no longer extract the <code>labels</code> attribute (<a href="https://github.com/tidyverse/purrr/issues/460" class="external-link">#460</a>, <a href="https://github.com/huftis" class="external-link">@huftis</a>).</p></li>
<li><p><code><a href="../reference/flatten.html">flatten_dfr()</a></code> and <code><a href="../reference/flatten.html">flatten_dfc()</a></code> now aborts if dplyr is not installed. (<a href="https://github.com/tidyverse/purrr/issues/454" class="external-link">#454</a>)</p></li>
<li><p><code><a href="../reference/map_dfr.html">imap_dfr()</a></code> now works with <code>.id</code> argument is provided (<a href="https://github.com/tidyverse/purrr/issues/429" class="external-link">#429</a>)</p></li>
<li><p><code><a href="../reference/list_assign.html">list_modify()</a></code>, <code><a href="../reference/update_list.html">update_list()</a></code> and <code><a href="../reference/list_assign.html">list_merge()</a></code> now handle duplicate duplicate argument names correctly (<a href="https://github.com/tidyverse/purrr/issues/441" class="external-link">#441</a>, <a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>).</p></li>
<li><p><code>map_raw</code>, <code>imap_raw</code>, <code>flatten_raw</code>, <code>invoke_map_raw</code>, <code>map2_raw</code> and <code>pmap_raw</code> added to support raw vectors. (<a href="https://github.com/tidyverse/purrr/issues/455" class="external-link">#455</a>, <a href="https://github.com/romainfrancois" class="external-link">@romainfrancois</a>)</p></li>
<li><p><code><a href="../reference/flatten.html">flatten()</a></code> now supports raw and complex elements.</p></li>
<li><p><code><a href="../reference/array-coercion.html">array_branch()</a></code> and <code><a href="../reference/array-coercion.html">array_tree()</a></code> now retain the <code><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames()</a></code> of the input array (<a href="https://github.com/tidyverse/purrr/issues/584" class="external-link">#584</a>, <a href="https://github.com/flying-sheep" class="external-link">@flying-sheep</a>)</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> no longer flattens lists of arguments. You can still do it manually with <code>!!!</code>. This change is for consistency with other dots-collecting functions of the tidyverse.</p></li>
<li>
<p><code><a href="../reference/map_if.html">map_at()</a></code>, <code><a href="../reference/lmap.html">lmap_at()</a></code> and <code><a href="../reference/modify.html">modify_at()</a></code> now supports selection using <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> and <code>tidyselect</code> (<a href="https://github.com/ColinFay" class="external-link">@ColinFay</a>, <a href="https://github.com/tidyverse/purrr/issues/608" class="external-link">#608</a>).</p>
<p>Note that for now you need to import <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> from dplyr or call it qualified like <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">dplyr::vars()</a></code>. It will be reexported from rlang in a future release.</p>
</li>
<li><p><code><a href="../reference/detect.html">detect()</a></code> now has a .default argument to specify the value returned when nothing is detected (<a href="https://github.com/tidyverse/purrr/issues/622" class="external-link">#622</a>, <a href="https://github.com/ColinFay" class="external-link">@ColinFay</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="life-cycle-0-3-0">Life cycle<a class="anchor" aria-label="anchor" href="#life-cycle-0-3-0"></a></h3>
<div class="section level4">
<h4 id="dir-arguments-0-3-0">
<code>.dir</code> arguments<a class="anchor" aria-label="anchor" href="#dir-arguments-0-3-0"></a></h4>
<p>We have standardised the purrr API for reverse iteration with a common <code>.dir</code> argument.</p>
<ul><li>
<p><code><a href="../reference/reduce_right.html">reduce_right()</a></code> is soft-deprecated and replaced by a new <code>.dir</code> argument of <code><a href="../reference/reduce.html">reduce()</a></code>:</p>
<p>```{r} # Before: reduce_right(1:3, f)</p>
<h2 id="after" class="pkg-version" data-toc-text="0.3.0">After:</h2><p class="text-muted">CRAN release: 2019-01-27</p>
<p>reduce(1:3, f, .dir = “backward”)</p>
<pre><code>
Note that the details of the computation have changed. Whereas
`reduce_right()` computed `f(f(3, 2), 1)`, it now computes `f(1,
f(2, 3))`. This is the standard way of reducing from the right.

To produce the exact same reduction as `reduce_right()`, simply
reverse your vector and use a left reduction:

```{r}
# Before:
reduce_right(1:3, f)

# After:
reduce(rev(1:3), f)</code></pre>
</li>
<li><p><code><a href="../reference/reduce_right.html">reduce2_right()</a></code> is soft-deprecated without replacement. It is not clear what algorithmic properties should a right reduction have in this case. Please reach out if you know about a use case for a right reduction with a ternary function.</p></li>
<li>
<p><code><a href="../reference/reduce_right.html">accumulate_right()</a></code> is soft-deprecated and replaced by the new <code>.dir</code> argument of <code><a href="../reference/accumulate.html">accumulate()</a></code>. Note that the algorithm has slightly changed: the accumulated value is passed to the right rather than the left, which is consistent with a right reduction.</p>
<p>```{r} # Before: accumulate_right(1:3, f)</p>
<h2 id="after-1" class="pkg-version" data-toc-text="0.3.0">After:</h2><p class="text-muted">CRAN release: 2019-01-27</p>
<p>accumulate(1:3, f, .dir = “backward”) ```</p>
</li>
<li>
<p>The <code>.right</code> argument of <code><a href="../reference/detect.html">detect()</a></code> and <code><a href="../reference/detect.html">detect_index()</a></code> is soft-deprecated and renamed to <code>.dir</code> for consistency with other functions and clarity of the interface.</p>
<p>```{r} # Before detect(x, f, .right = TRUE)</p>
<h2 id="after-2" class="pkg-version" data-toc-text="0.3.0">After</h2><p class="text-muted">CRAN release: 2019-01-27</p>
<p>detect(x, f, .dir = “backward”) ```</p>
</li>
</ul></div>
<div class="section level4">
<h4 id="simplification-of-partial-0-3-0">Simplification of <code>partial()</code>
<a class="anchor" aria-label="anchor" href="#simplification-of-partial-0-3-0"></a></h4>
<p>The interface of <code><a href="../reference/partial.html">partial()</a></code> has been simplified (see more about <code><a href="../reference/partial.html">partial()</a></code> below):</p>
<ul><li><p>The <code>.lazy</code> argument of <code><a href="../reference/partial.html">partial()</a></code> is soft-deprecated in favour of quasiquotation.</p></li>
<li><p>We had to rename <code>...f</code> to <code>.f</code> in <code><a href="../reference/partial.html">partial()</a></code> in order to support <code>... =</code> argument (which would otherwise partial-match on <code>...f</code>). This also makes <code><a href="../reference/partial.html">partial()</a></code> more consistent with other purrr function signatures.</p></li>
</ul></div>
<div class="section level4">
<h4 id="retirement-of-invoke-0-3-0">Retirement of <code>invoke()</code>
<a class="anchor" aria-label="anchor" href="#retirement-of-invoke-0-3-0"></a></h4>
<p><code><a href="../reference/invoke.html">invoke()</a></code> and <code><a href="../reference/invoke.html">invoke_map()</a></code> are retired in favour of <code><a href="https://rlang.r-lib.org/reference/exec.html" class="external-link">exec()</a></code>. Note that retired functions are no longer under active development, but continue to be maintained undefinitely in the package.</p>
<ul><li>
<p><code><a href="../reference/invoke.html">invoke()</a></code> is retired in favour of the <code><a href="https://rlang.r-lib.org/reference/exec.html" class="external-link">exec()</a></code> function, reexported from rlang. <code><a href="https://rlang.r-lib.org/reference/exec.html" class="external-link">exec()</a></code> evaluates a function call built from its inputs and supports tidy dots:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Before:</span></span>
<span><span class="fu"><a href="../reference/invoke.html">invoke</a></span><span class="op">(</span><span class="va">mean</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># After</span></span>
<span><span class="fu"><a href="https://rlang.r-lib.org/reference/exec.html" class="external-link">exec</a></span><span class="op">(</span><span class="va">mean</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Note that retired functions are not removed from the package and will be maintained undefinitely.</p>
</li>
<li>
<p><code><a href="../reference/invoke.html">invoke_map()</a></code> is retired without replacement because it is more complex to understand than the corresponding code using <code><a href="../reference/map.html">map()</a></code>, <code><a href="../reference/map2.html">map2()</a></code> and <code><a href="https://rlang.r-lib.org/reference/exec.html" class="external-link">exec()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Before:</span></span>
<span><span class="fu"><a href="../reference/invoke.html">invoke_map</a></span><span class="op">(</span><span class="va">fns</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">args</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/invoke.html">invoke_map</a></span><span class="op">(</span><span class="va">fns</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">args1</span>, <span class="va">args2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># After:</span></span>
<span><span class="fu"><a href="../reference/map.html">map</a></span><span class="op">(</span><span class="va">fns</span>, <span class="va">exec</span>, <span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">args</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/map2.html">map2</a></span><span class="op">(</span><span class="va">fns</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">args1</span>, <span class="va">args2</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">fn</span>, <span class="va">args</span><span class="op">)</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/exec.html" class="external-link">exec</a></span><span class="op">(</span><span class="va">fn</span>, <span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">args</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</li>
</ul></div>
<div class="section level4">
<h4 id="other-lifecycle-changes-0-3-0">Other lifecycle changes<a class="anchor" aria-label="anchor" href="#other-lifecycle-changes-0-3-0"></a></h4>
<ul><li><p><code>%@%</code> is soft-deprecated, please use the operator exported in rlang instead. The latter features an interface more consistent with <code>@</code> as it uses NSE, supports S4 fields, and has an assignment variant.</p></li>
<li>
<p>Removing elements from lists using <code>NULL</code> in <code><a href="../reference/list_assign.html">list_modify()</a></code> is soft-deprecated. Please use the new <code><a href="https://rlang.r-lib.org/reference/zap.html" class="external-link">zap()</a></code> sentinel reexported from rlang instead:</p>
<p>```{r} # Before: list_modify(x, foo = NULL)</p>
<p># After: list_modify(x, foo = zap()) ```</p>
<p>This change is motivated by the ambiguity of <code>NULL</code> as a deletion sentinel because <code>NULL</code> is also a valid value in lists. In the future, <code>NULL</code> will set an element to <code>NULL</code> rather than removing the element.</p>
</li>
<li><p><code><a href="../reference/rerun.html">rerun()</a></code> is now in the questioning stage because we are no longer convinced NSE functions are a good fit for purrr. Also, <code>rerun(n,   x)</code> can just as easily be expressed as <code>map(1:n, ~ x)</code> (with the added benefit of being passed the current index as argument to the lambda).</p></li>
<li><p><code>map_call()</code> is defunct.</p></li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.5" id="purrr-025">purrr 0.2.5<a class="anchor" aria-label="anchor" href="#purrr-025"></a></h2><p class="text-muted">CRAN release: 2018-05-29</p>
<ul><li>This is a maintenance release following the release of dplyr 0.7.5.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.4" id="purrr-024">purrr 0.2.4<a class="anchor" aria-label="anchor" href="#purrr-024"></a></h2><p class="text-muted">CRAN release: 2017-10-18</p>
<ul><li>Fixes for R 3.1.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.3" id="purrr-023">purrr 0.2.3<a class="anchor" aria-label="anchor" href="#purrr-023"></a></h2><p class="text-muted">CRAN release: 2017-08-02</p>
<div class="section level3">
<h3 id="breaking-changes-0-2-3">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-3"></a></h3>
<p>We noticed the following issues during reverse dependencies checks:</p>
<ul><li><p>If <code><a href="../reference/reduce.html">reduce()</a></code> fails with this message: <code>Error: `.x` is empty, and   no `.init` supplied</code>, this is because <code><a href="../reference/reduce.html">reduce()</a></code> now returns <code>.init</code> when <code>.x</code> is empty. Fix the problem by supplying an appropriate argument to <code>.init</code>, or by providing special behaviour when <code>.x</code> has length 0.</p></li>
<li><p>The type predicates have been migrated to rlang. Consequently the <code>bare-type-predicates</code> documentation topic is no longer in purrr, which might cause a warning if you cross-reference it.</p></li>
</ul></div>
<div class="section level3">
<h3 id="dependencies-0-2-3">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies-0-2-3"></a></h3>
<p>purrr no longer depends on lazyeval or Rcpp (or dplyr, as of the previous version). This makes the dependency graph of the tidyverse simpler, and makes purrr more suitable as a dependency of lower-level packages.</p>
<p>There have also been two changes to eliminate name conflicts between purrr and dplyr:</p>
<ul><li><p><code><a href="https://dplyr.tidyverse.org/reference/order_by.html" class="external-link">order_by()</a></code>, <code><a href="https://rdrr.io/r/base/sort_by.html" class="external-link">sort_by()</a></code> and <code>split_by()</code> have been removed. <code><a href="https://dplyr.tidyverse.org/reference/order_by.html" class="external-link">order_by()</a></code> conflicted with <code><a href="https://dplyr.tidyverse.org/reference/order_by.html" class="external-link">dplyr::order_by()</a></code> and the complete family doesn’t feel that useful. Use tibbles instead (<a href="https://github.com/tidyverse/purrr/issues/217" class="external-link">#217</a>).</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains()</a></code> has been renamed to <code><a href="../reference/has_element.html">has_element()</a></code> to avoid conflicts with dplyr (<a href="https://github.com/tidyverse/purrr/issues/217" class="external-link">#217</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="pluck-0-2-3">pluck()<a class="anchor" aria-label="anchor" href="#pluck-0-2-3"></a></h3>
<p>The plucking mechanism used for indexing into data structures with <code><a href="../reference/map.html">map()</a></code> has been extracted into the function <code><a href="../reference/pluck.html">pluck()</a></code>. Plucking is often more readable to extract an element buried in a deep data structure. Compare this syntax-heavy extraction which reads non-linearly:</p>
<pre><code><span><span class="fu">accessor</span><span class="op">(</span><span class="va">x</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">$</span><span class="va">foo</span></span></code></pre>
<p>to the equivalent pluck:</p>
<pre><code><span><span class="va">x</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/pluck.html">pluck</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">accessor</span>, <span class="st">"foo"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="map-helpers-0-2-3">Map helpers<a class="anchor" aria-label="anchor" href="#map-helpers-0-2-3"></a></h3>
<ul><li>
<p><code>as_function()</code> is now <code><a href="../reference/as_mapper.html">as_mapper()</a></code> because it is a tranformation that makes sense primarily for mapping functions, not in general (<a href="https://github.com/tidyverse/purrr/issues/298" class="external-link">#298</a>). <code>.null</code> has been renamed to <code>.default</code> to better reflect its intent (<a href="https://github.com/tidyverse/purrr/issues/298" class="external-link">#298</a>). <code>.default</code> is returned whenever an element is absent or empty (<a href="https://github.com/tidyverse/purrr/issues/231" class="external-link">#231</a>, <a href="https://github.com/tidyverse/purrr/issues/254" class="external-link">#254</a>).</p>
<p><code><a href="../reference/as_mapper.html">as_mapper()</a></code> sanitises primitive functions by transforming them to closures with standardised argument names (using <code><a href="https://rlang.r-lib.org/reference/as_closure.html" class="external-link">rlang::as_closure()</a></code>). For instance <code>+</code> is transformed to <code>function(.x, .y) .x + .y</code>. This results in proper argument matching so that <code>map(1:10, partial(</code>-<code>, .x = 5))</code> produces <code>list(5 - 1, 5 - 2, ...)</code>.</p>
</li>
<li><p>Recursive indexing can now extract objects out of environments (<a href="https://github.com/tidyverse/purrr/issues/213" class="external-link">#213</a>) and S4 objects (<a href="https://github.com/tidyverse/purrr/issues/200" class="external-link">#200</a>), as well as lists.</p></li>
<li><p><code><a href="../reference/attr_getter.html">attr_getter()</a></code> makes it possible to extract from attributes like <code>map(list(iris, mtcars), attr_getter("row.names"))</code>.</p></li>
<li><p>The argument list for formula-functions has been tweaked so that you can refer to arguments by position with <code>..1</code>, <code>..2</code>, and so on. This makes it possible to use the formula shorthand for functions with more than two arguments (<a href="https://github.com/tidyverse/purrr/issues/289" class="external-link">#289</a>).</p></li>
<li><p><code><a href="../reference/possibly.html">possibly()</a></code>, <code><a href="../reference/safely.html">safely()</a></code> and friends no longer capture interrupts: this means that you can now terminate a mapper using one of these with Escape or Ctrl + C (<a href="https://github.com/tidyverse/purrr/issues/314" class="external-link">#314</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="map-functions-0-2-3">Map functions<a class="anchor" aria-label="anchor" href="#map-functions-0-2-3"></a></h3>
<ul><li><p>All map functions now treat <code>NULL</code> the same way as an empty vector (<a href="https://github.com/tidyverse/purrr/issues/199" class="external-link">#199</a>), and return an empty vector if any input is an empty vector.</p></li>
<li><p>All <code><a href="../reference/map.html">map()</a></code> functions now force their arguments in the same way that base R does for <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/191" class="external-link">#191</a>). This makes <code><a href="../reference/map.html">map()</a></code> etc easier to use when generating functions.</p></li>
<li><p>A new family of “indexed” map functions, <code><a href="../reference/imap.html">imap()</a></code>, <code><a href="../reference/imap.html">imap_lgl()</a></code> etc, provide a short-hand for <code>map2(x, names(x))</code> or <code>map2(x, seq_along(x))</code> (<a href="https://github.com/tidyverse/purrr/issues/240" class="external-link">#240</a>).</p></li>
<li><p>The data frame suffix <code>_df</code> has been (soft) deprecated in favour of <code>_dfr</code> to more clearly indicate that it’s a row-bind. All variants now also have a <code>_dfc</code> for column binding (<a href="https://github.com/tidyverse/purrr/issues/167" class="external-link">#167</a>). (These will not be terribly useful until <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">dplyr::bind_rows()</a></code>/<code><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">dplyr::bind_cols()</a></code> have better semantics for vectors.)</p></li>
</ul></div>
<div class="section level3">
<h3 id="modify-functions-0-2-3">Modify functions<a class="anchor" aria-label="anchor" href="#modify-functions-0-2-3"></a></h3>
<p>A new <code><a href="../reference/modify.html">modify()</a></code> family returns the same output of the type as the input <code>.x</code>. This is in contrast to the <code><a href="../reference/map.html">map()</a></code> family which always returns a list, regardless of the input type.</p>
<p>The modify functions are S3 generics. However their default methods should be sufficient for most classes since they rely on the semantics of <code>[&lt;-</code>. <code>modify.default()</code> is thus a shorthand for <code>x[] &lt;- map(x, f)</code>.</p>
<ul><li><p><code><a href="../reference/at_depth.html">at_depth()</a></code> has been renamed to <code><a href="../reference/map_depth.html">modify_depth()</a></code>.</p></li>
<li><p><code><a href="../reference/map_depth.html">modify_depth()</a></code> gains new <code>.ragged</code> argument, and negative depths are now computed relative to the deepest component of the list (<a href="https://github.com/tidyverse/purrr/issues/236" class="external-link">#236</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-functions-0-2-3">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-2-3"></a></h3>
<ul><li><p><code>auto_browse(f)</code> returns a new function that automatically calls <code><a href="https://rdrr.io/r/base/browser.html" class="external-link">browser()</a></code> if <code>f</code> throws an error (<a href="https://github.com/tidyverse/purrr/issues/281" class="external-link">#281</a>).</p></li>
<li><p><code><a href="../reference/pluck_depth.html">vec_depth()</a></code> computes the depth (i.e. the number of levels of indexing) or a vector (<a href="https://github.com/tidyverse/purrr/issues/243" class="external-link">#243</a>).</p></li>
<li><p><code><a href="../reference/reduce.html">reduce2()</a></code> and <code><a href="../reference/reduce_right.html">reduce2_right()</a></code> make it possible to reduce with a 3 argument function where the first argument is the accumulated value, the second argument is <code>.x</code>, and the third argument is <code>.y</code> (<a href="https://github.com/tidyverse/purrr/issues/163" class="external-link">#163</a>).</p></li>
<li><p><code><a href="../reference/list_assign.html">list_modify()</a></code> extends <code>stats::modifyList()</code> to replace by position if the list is not named.(<a href="https://github.com/tidyverse/purrr/issues/201" class="external-link">#201</a>). <code><a href="../reference/list_assign.html">list_merge()</a></code> operates similarly to <code><a href="../reference/list_assign.html">list_modify()</a></code> but combines instead of replacing (<a href="https://github.com/tidyverse/purrr/issues/322" class="external-link">#322</a>).</p></li>
<li><p>The legacy function <code><a href="../reference/update_list.html">update_list()</a></code> is basically a version of <code>list_modify</code> that evaluates formulas within the list. It is likely to be deprecated in the future in favour of a tidyeval interface such as a list method for <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-improvements-and-bug-fixes-0-2-3">Minor improvements and bug fixes<a class="anchor" aria-label="anchor" href="#minor-improvements-and-bug-fixes-0-2-3"></a></h3>
<ul><li><p>Thanks to <a href="https://github.com/dchiu911" class="external-link">@dchiu911</a>, the unit test coverage of purrr is now much greater.</p></li>
<li><p>All predicate functions are re-exported from rlang (<a href="https://github.com/tidyverse/purrr/issues/124" class="external-link">#124</a>).</p></li>
<li><p><code><a href="../reference/keep.html">compact()</a></code> now works with standard mapper conventions (<a href="https://github.com/tidyverse/purrr/issues/282" class="external-link">#282</a>).</p></li>
<li><p><code><a href="../reference/cross.html">cross_n()</a></code> has been renamed to <code><a href="../reference/cross.html">cross()</a></code>. The <code>_n</code> suffix was removed for consistency with <code><a href="../reference/pmap.html">pmap()</a></code> (originally called <code>map_n()</code> at the start of the project) and <code><a href="../reference/transpose.html">transpose()</a></code> (originally called <code>zip_n()</code>). Similarly, <code><a href="../reference/cross.html">cross_d()</a></code> has been renamed to <code><a href="../reference/cross.html">cross_df()</a></code> for consistency with <code><a href="../reference/map_dfr.html">map_df()</a></code>.</p></li>
<li><p><code><a href="../reference/every.html">every()</a></code> and <code><a href="../reference/every.html">some()</a></code> now return <code>NA</code> if present in the input (<a href="https://github.com/tidyverse/purrr/issues/174" class="external-link">#174</a>).</p></li>
<li><p><code><a href="../reference/invoke.html">invoke()</a></code> uses a more robust approach to generate the argument list (<a href="https://github.com/tidyverse/purrr/issues/249" class="external-link">#249</a>) It no longer uses lazyeval to figure out which enviroment a character <code>f</code> comes from.</p></li>
<li><p><code>is_numeric()</code> and <code>is_scalar_numeric()</code> are deprecated because they don’t test for what you might expect at first sight.</p></li>
<li><p><code><a href="../reference/reduce.html">reduce()</a></code> now throws an error if <code>.x</code> is empty and <code>.init</code> is not supplied.</p></li>
<li><p>Deprecated functions <code>flatmap()</code>, <code>map3()</code>, <code>map_n()</code>, <code>walk3()</code>, <code>walk_n()</code>, <code>zip2()</code>, <code>zip3()</code>, <code>zip_n()</code> have been removed.</p></li>
<li><p><code><a href="../reference/pmap.html">pmap()</a></code> coerces data frames to lists to avoid the expensive <code>[.data.frame</code> which provides security that is unneeded here (<a href="https://github.com/tidyverse/purrr/issues/220" class="external-link">#220</a>).</p></li>
<li><p><code><a href="../reference/rdunif.html">rdunif()</a></code> checks its inputs for validity (<a href="https://github.com/tidyverse/purrr/issues/211" class="external-link">#211</a>).</p></li>
<li><p><code><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names()</a></code> can now take a function to tranform the names programmatically (<a href="https://github.com/tidyverse/purrr/issues/276" class="external-link">#276</a>), and you can supply names in <code>...</code> to reduce typing even more more (<a href="https://github.com/tidyverse/purrr/issues/316" class="external-link">#316</a>). <code><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names()</a></code> is now powered by <code><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">rlang::set_names()</a></code>.</p></li>
<li><p><code><a href="../reference/safely.html">safely()</a></code> now actually uses the <code>quiet</code> argument (<a href="https://github.com/tidyverse/purrr/issues/296" class="external-link">#296</a>).</p></li>
<li><p><code><a href="../reference/transpose.html">transpose()</a></code> now matches by name if available (<a href="https://github.com/tidyverse/purrr/issues/164" class="external-link">#164</a>). You can override the default choice with the new <code>.names</code> argument.</p></li>
<li><p>The function argument of <code><a href="../reference/detect.html">detect()</a></code> and <code><a href="../reference/detect.html">detect_index()</a></code> have been renamed from <code>.p</code> to <code>.f</code>. This is because they have mapper semantics rather than predicate semantics.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.2.1" id="purrr-0221">purrr 0.2.2.1<a class="anchor" aria-label="anchor" href="#purrr-0221"></a></h2>
<p>This is a compatibility release with dplyr 0.6.0.</p>
<ul><li>All data-frame based mappers have been removed in favour of new functions and idioms in the tidyverse. <code>dmap()</code>, <code>dmap_at()</code>, <code>dmap_if()</code>, <code>invoke_rows()</code>, <code>slice_rows()</code>, <code>map_rows()</code>, <code>by_slice()</code>, <code>by_row()</code>, and <code>unslice()</code> have been moved to purrrlyr. This is a bit of an aggresive change but it allows us to make the dependencies much lighter.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.2" id="purrr-022">purrr 0.2.2<a class="anchor" aria-label="anchor" href="#purrr-022"></a></h2><p class="text-muted">CRAN release: 2016-06-18</p>
<ul><li><p>Fix for dev tibble support.</p></li>
<li><p><code>as_function()</code> now supports list arguments which allow recursive indexing using either names or positions. They now always stop when encountering the first NULL (<a href="https://github.com/tidyverse/purrr/issues/173" class="external-link">#173</a>).</p></li>
<li><p><code>accumulate</code> and <code>reduce</code> correctly pass extra arguments to the worker function.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="purrr-021">purrr 0.2.1<a class="anchor" aria-label="anchor" href="#purrr-021"></a></h2><p class="text-muted">CRAN release: 2016-02-13</p>
<ul><li><p><code>as_function()</code> gains a <code>.null</code> argument that for character and numeric values allows you to specify what to return for null/absent elements (<a href="https://github.com/tidyverse/purrr/issues/110" class="external-link">#110</a>). This can be used with any map function, e.g. <code>map_int(x, 1, .null = NA)</code></p></li>
<li><p><code>as_function()</code> is now generic.</p></li>
<li><p>New <code><a href="https://rlang.r-lib.org/reference/is_function.html" class="external-link">is_function()</a></code> that returns <code>TRUE</code> only for regular functions.</p></li>
<li><p>Fix crash on GCC triggered by <code>invoke_rows()</code>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="purrr-020">purrr 0.2.0<a class="anchor" aria-label="anchor" href="#purrr-020"></a></h2><p class="text-muted">CRAN release: 2016-01-04</p>
<div class="section level3">
<h3 id="new-functions-0-2-0">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-2-0"></a></h3>
<ul><li>
<p>There are two handy infix functions:</p>
<ul><li>
<code>x %||% y</code> is shorthand for <code>if (is.null(x)) y else x</code> (<a href="https://github.com/tidyverse/purrr/issues/109" class="external-link">#109</a>).</li>
<li>
<code>x %@% "a"</code> is shorthand for <code>attr(x, "a", exact = TRUE)</code> (<a href="https://github.com/tidyverse/purrr/issues/69" class="external-link">#69</a>).</li>
</ul></li>
<li><p><code><a href="../reference/accumulate.html">accumulate()</a></code> has been added to handle recursive folding. It is shortand for <code>Reduce(f, .x, accumulate = TRUE)</code> and follows a similar syntax to <code><a href="../reference/reduce.html">reduce()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/145" class="external-link">#145</a>). A right-hand version <code><a href="../reference/reduce_right.html">accumulate_right()</a></code> was also added.</p></li>
<li><p><code><a href="../reference/map_dfr.html">map_df()</a></code> row-binds output together. It’s the equivalent of <code>plyr::ldply()</code> (<a href="https://github.com/tidyverse/purrr/issues/127" class="external-link">#127</a>)</p></li>
<li><p><code><a href="../reference/flatten.html">flatten()</a></code> is now type-stable and always returns a list. To return a simpler vector, use <code><a href="../reference/flatten.html">flatten_lgl()</a></code>, <code><a href="../reference/flatten.html">flatten_int()</a></code>, <code><a href="../reference/flatten.html">flatten_dbl()</a></code>, <code><a href="../reference/flatten.html">flatten_chr()</a></code>, or <code><a href="../reference/flatten.html">flatten_df()</a></code>.</p></li>
<li><p><code><a href="../reference/invoke.html">invoke()</a></code> has been overhauled to be more useful: it now works similarly to <code>map_call()</code> when <code>.x</code> is NULL, and hence <code>map_call()</code> has been deprecated. <code><a href="../reference/invoke.html">invoke_map()</a></code> is a vectorised complement to <code><a href="../reference/invoke.html">invoke()</a></code> (<a href="https://github.com/tidyverse/purrr/issues/125" class="external-link">#125</a>), and comes with typed variants <code><a href="../reference/invoke.html">invoke_map_lgl()</a></code>, <code><a href="../reference/invoke.html">invoke_map_int()</a></code>, <code><a href="../reference/invoke.html">invoke_map_dbl()</a></code>, <code><a href="../reference/invoke.html">invoke_map_chr()</a></code>, and <code><a href="../reference/invoke.html">invoke_map_df()</a></code>.</p></li>
<li><p><code><a href="../reference/transpose.html">transpose()</a></code> replaces <code>zip2()</code>, <code>zip3()</code>, and <code>zip_n()</code> (<a href="https://github.com/tidyverse/purrr/issues/128" class="external-link">#128</a>). The name more clearly reflects the intent (transposing the first and second levels of list). It no longer has fields argument or the <code>.simplify</code> argument; instead use the new <code><a href="../reference/as_vector.html">simplify_all()</a></code> function.</p></li>
<li><p><code><a href="../reference/safely.html">safely()</a></code>, <code><a href="../reference/quietly.html">quietly()</a></code>, and <code><a href="../reference/possibly.html">possibly()</a></code> are experimental functions for working with functions with side-effects (e.g. printed output, messages, warnings, and errors) (<a href="https://github.com/tidyverse/purrr/issues/120" class="external-link">#120</a>). <code><a href="../reference/safely.html">safely()</a></code> is a version of <code><a href="https://rdrr.io/r/base/try.html" class="external-link">try()</a></code> that modifies a function (rather than an expression), and always returns a list with two components, <code>result</code> and <code>error</code>.</p></li>
<li><p><code><a href="../reference/along.html">list_along()</a></code> and <code><a href="https://rlang.r-lib.org/reference/rep_along.html" class="external-link">rep_along()</a></code> generalise the idea of <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along()</a></code>. (<a href="https://github.com/tidyverse/purrr/issues/122" class="external-link">#122</a>).</p></li>
<li><p><code>is_null()</code> is the snake-case version of <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null()</a></code>.</p></li>
<li><p><code><a href="../reference/pmap.html">pmap()</a></code> (parallel map) replaces <code>map_n()</code> (<a href="https://github.com/tidyverse/purrr/issues/132" class="external-link">#132</a>), and has typed-variants suffixed <code><a href="../reference/pmap.html">pmap_lgl()</a></code>, <code><a href="../reference/pmap.html">pmap_int()</a></code>, <code><a href="../reference/pmap.html">pmap_dbl()</a></code>, <code><a href="../reference/pmap.html">pmap_chr()</a></code>, and <code><a href="../reference/map_dfr.html">pmap_df()</a></code>.</p></li>
<li><p><code><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names()</a></code> is a snake-case alternative to <code><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames()</a></code> with stricter equality checking, and more convenient defaults for pipes: <code>x |&gt; set_names()</code> is equivalent to <code>setNames(x, x)</code> (<a href="https://github.com/tidyverse/purrr/issues/119" class="external-link">#119</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="row-based-functionals-0-2-0">Row based functionals<a class="anchor" aria-label="anchor" href="#row-based-functionals-0-2-0"></a></h3>
<p>We are still figuring out what belongs in dplyr and what belongs in purrr. Expect much experimentation and many changes with these functions.</p>
<ul><li><p><code><a href="../reference/map.html">map()</a></code> now always returns a list. Data frame support has been moved to <code><a href="../reference/map_dfr.html">map_df()</a></code> and <code>dmap()</code>. The latter supports sliced data frames as a shortcut for the combination of <code>by_slice()</code> and <code>dmap()</code>: <code>x |&gt; by_slice(dmap, fun, .collate = "rows")</code>. The conditional variants <code>dmap_at()</code> and <code>dmap_if()</code> also support sliced data frames and will recycle scalar results to the slice size.</p></li>
<li><p><code>map_rows()</code> has been renamed to <code>invoke_rows()</code>. As other rows-based functionals, it collates results inside lists by default, but with column collation this function is equivalent to <code>plyr::mdply()</code>.</p></li>
<li><p>The rows-based functionals gain a <code>.to</code> option to name the output column as well as a <code>.collate</code> argument. The latter allows to collate the output in lists (by default), on columns or on rows. This makes these functions more flexible and more predictable.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-changes-0-2-0">Bug fixes and minor changes<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-changes-0-2-0"></a></h3>
<ul><li><p><code>as_function()</code>, which converts formulas etc to functions, is now exported (<a href="https://github.com/tidyverse/purrr/issues/123" class="external-link">#123</a>).</p></li>
<li><p><code><a href="../reference/rerun.html">rerun()</a></code> is correctly scoped (<a href="https://github.com/tidyverse/purrr/issues/95" class="external-link">#95</a>)</p></li>
<li><p><code><a href="../reference/update_list.html">update_list()</a></code> can now modify an element called <code>x</code> (<a href="https://github.com/tidyverse/purrr/issues/98" class="external-link">#98</a>).</p></li>
<li><p><code>map*()</code> now use custom C code, rather than relying on <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code>, <code><a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply()</a></code> etc. The performance characteristcs are very similar, but it allows us greater control over the output (<a href="https://github.com/tidyverse/purrr/issues/118" class="external-link">#118</a>).</p></li>
<li><p><code><a href="../reference/map.html">map_lgl()</a></code> now has second argument <code>.f</code>, not <code>.p</code> (<a href="https://github.com/tidyverse/purrr/issues/134" class="external-link">#134</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="deprecated-functions-0-2-0">Deprecated functions<a class="anchor" aria-label="anchor" href="#deprecated-functions-0-2-0"></a></h3>
<ul><li><p><code>flatmap()</code> -&gt; use <code><a href="../reference/map.html">map()</a></code> followed by the appropriate <code><a href="../reference/flatten.html">flatten()</a></code>.</p></li>
<li><p><code>map_call()</code> -&gt; <code><a href="../reference/invoke.html">invoke()</a></code>.</p></li>
<li><p><code>map_n()</code> -&gt; <code><a href="../reference/pmap.html">pmap()</a></code>; <code>walk_n()</code> -&gt; <code><a href="../reference/pmap.html">pwalk()</a></code>.</p></li>
<li><p><code>map3(x, y, z)</code> -&gt; <code>map_n(list(x, y, z))</code>; <code>walk3(x, y, z) -&gt;</code>pwalk(list(x, y, z))`</p></li>
</ul></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

