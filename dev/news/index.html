<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • purrr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">



<meta property="og:title" content="Changelog" />

<meta property="og:image" content="https://purrr.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">purrr</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.3.0.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/other-langs.html">Functional programming in other languages</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/02/purrr-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2017/08/purrr-0.2.3/">Version 0.2.3</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/purrr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/tidyverse/purrr/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="purrr-0-3-0-9000" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-3-0-9000" class="anchor"></a>purrr 0.3.0.9000<small> Unreleased </small>
</h1>
<ul>
<li>
<code><a href="../reference/compose.html">compose()</a></code> now works with generic functions again (<a href='https://github.com/tidyverse/purrr/issues/629'>#629</a>, <a href='https://github.com/tidyverse/purrr/issues/639'>#639</a>). Its set of unit tests was expanded to cover many edge cases.</li>
</ul>
</div>
    <div id="purrr-0-3-0" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-3-0" class="anchor"></a>purrr 0.3.0<small> 2019-01-27 </small>
</h1>
<div id="breaking-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes" class="anchor"></a>Breaking changes</h2>
<ul>
<li>
<p><code><a href="../reference/modify.html">modify()</a></code> and variants are now wrapping <code>[[&lt;-</code> instead of <code>[&lt;-</code>. This change increases the genericity of these functions but might cause different behaviour in some cases.</p>
<p>For instance, the <code>[[&lt;-</code> for data frames is stricter than the <code>[&lt;-</code> method and might throw errors instead of warnings. This is the case when assigning a longer vector than the number of rows. <code>[&lt;-</code> truncates the vector with a warning, <code>[[&lt;-</code> fails with an error (as is appropriate).</p>
</li>
<li><p><code><a href="../reference/modify.html">modify()</a></code> and variants now return the same type as the input when the input is an atomic vector.</p></li>
<li>
<p>All functionals taking predicate functions (like <code><a href="../reference/keep.html">keep()</a></code>, <code><a href="../reference/detect.html">detect()</a></code>, <code><a href="../reference/every.html">some()</a></code>) got stricter. Predicate functions must now return a single <code>TRUE</code> or <code>FALSE</code>.</p>
<p>This change is meant to detect problems early with a more meaningful error message.</p>
</li>
</ul>
</div>
<div id="plucking" class="section level2">
<h2 class="hasAnchor">
<a href="#plucking" class="anchor"></a>Plucking</h2>
<ul>
<li><p>New <code><a href="../reference/pluck.html">chuck()</a></code> function. This is a strict variant of <code><a href="../reference/pluck.html">pluck()</a></code> that throws errors when an element does not exist instead of returning <code>NULL</code> (<a href='https://github.com/daniel-barnett'>@daniel-barnett</a>, <a href='https://github.com/tidyverse/purrr/issues/482'>#482</a>).</p></li>
<li><p>New <code><a href="../reference/modify_in.html">assign_in()</a></code> and <code>pluck&lt;-</code> functions. They modify a data structure at an existing pluck location.</p></li>
<li><p>New <code><a href="../reference/modify_in.html">modify_in()</a></code> function to map a function at a pluck location.</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> now dispatches properly with S3 vectors. The vector class must implement a <code><a href="https://www.rdocumentation.org/packages/base/topics/length">length()</a></code> method for numeric indexing and a <code><a href="https://www.rdocumentation.org/packages/base/topics/names">names()</a></code> method for string indexing.</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> now supports primitive functions (<a href='https://github.com/tidyverse/purrr/issues/404'>#404</a>).</p></li>
</ul>
</div>
<div id="mapping" class="section level2">
<h2 class="hasAnchor">
<a href="#mapping" class="anchor"></a>Mapping</h2>
<ul>
<li><p>New <code>.else</code> argument for <code><a href="../reference/map.html">map_if()</a></code> and <code><a href="../reference/modify.html">modify_if()</a></code>. They take an alternative function that is mapped over elements of the input for which the predicate function returns <code>FALSE</code> (<a href='https://github.com/tidyverse/purrr/issues/324'>#324</a>).</p></li>
<li><p><code><a href="../reference/reduce.html">reduce()</a></code>, <code><a href="../reference/reduce.html">reduce2()</a></code>, <code><a href="../reference/accumulate.html">accumulate()</a></code>, and <code><a href="../reference/accumulate.html">accumulate2()</a></code> now terminate early when the function returns a value wrapped with <code><a href="../reference/done.html">done()</a></code> (<a href='https://github.com/tidyverse/purrr/issues/253'>#253</a>). When an empty <code><a href="../reference/done.html">done()</a></code> is returned, the value at the last iteration is returned instead.</p></li>
<li>
<p>Functions taking predicates (<code><a href="../reference/map.html">map_if()</a></code>, <code><a href="../reference/keep.html">keep()</a></code>, <code><a href="../reference/every.html">some()</a></code>, <code><a href="../reference/every.html">every()</a></code>, <code><a href="../reference/keep.html">keep()</a></code>, etc) now fail with an informative message when the return value is not <code>TRUE</code> or <code>FALSE</code> (<a href='https://github.com/tidyverse/purrr/issues/470'>#470</a>).</p>
<p>This is a breaking change for <code><a href="../reference/every.html">every()</a></code> and <code><a href="../reference/every.html">some()</a></code> which were documented to be more liberal in the values they accepted as logical (any vector was considered <code>TRUE</code> if not a single <code>FALSE</code> value, no matter its length). These functions signal soft-deprecation warnings instead of a hard failure.</p>
</li>
<li><p><code><a href="../reference/modify.html">modify()</a></code> and variants are now implemented using <code><a href="https://www.rdocumentation.org/packages/base/topics/length">length()</a></code>, <code>[[</code>, and <code>[[&lt;-</code> methods. This implementation should be compatible with most vector classes.</p></li>
<li><p>New <code><a href="../reference/modify.html">modify2()</a></code> and <code><a href="../reference/modify.html">imodify()</a></code> functions. These work like <code><a href="../reference/map.html">map()</a></code> and <code><a href="../reference/imap.html">imap()</a></code> but preserve the type of <code>.x</code> in the return value.</p></li>
<li><p><code><a href="../reference/map2.html">pmap()</a></code> and <code><a href="../reference/map2.html">pwalk()</a></code> now preserve class for inputs of <code>factor</code>, <code>Date</code>, <code>POSIXct</code> and other atomic S3 classes with an appropriate <code>[[</code> method (<a href='https://github.com/tidyverse/purrr/issues/358'>#358</a>, <a href='https://github.com/mikmart'>@mikmart</a>).</p></li>
<li><p><code><a href="../reference/modify.html">modify()</a></code>, <code><a href="../reference/modify.html">modify_if()</a></code> and <code><a href="../reference/modify.html">modify_at()</a></code> now preserve the class of atomic vectors instead of promoting them to lists. New S3 methods are provided for character, logical, double, and integer classes (<a href='https://github.com/t-kalinowski'>@t-kalinowski</a>, <a href='https://github.com/tidyverse/purrr/issues/417'>#417</a>).</p></li>
<li><p>By popular request, <code><a href="../reference/modify.html">at_depth()</a></code> has been brought back as <code><a href="../reference/map.html">map_depth()</a></code>. Like <code><a href="../reference/modify.html">modify_depth()</a></code>, it applies a function at a specified level of a data structure. However, it transforms all traversed vectors up to <code>.depth</code> to bare lists (<a href='https://github.com/tidyverse/purrr/issues/381'>#381</a>).</p></li>
<li><p><code><a href="../reference/map.html">map_at()</a></code>, <code><a href="../reference/modify.html">modify_at()</a></code> and <code><a href="../reference/lmap.html">lmap_at()</a></code> accept negative values for <code>.at</code>, ignoring elements at those positions.</p></li>
<li><p><code><a href="../reference/map.html">map()</a></code> and <code><a href="../reference/modify.html">modify()</a></code> now work with calls and pairlists (<a href='https://github.com/tidyverse/purrr/issues/412'>#412</a>).</p></li>
<li><p><code><a href="../reference/modify.html">modify_depth()</a></code> now modifies atomic leaves as well. This makes <code><a href="../reference/modify.html">modify_depth(x, 1, fn)</a></code> equivalent to <code><a href="../reference/modify.html">modify(x, fn)</a></code> (<a href='https://github.com/tidyverse/purrr/issues/359'>#359</a>).</p></li>
<li><p>New <code><a href="../reference/accumulate.html">accumulate2()</a></code> function which is to <code><a href="../reference/accumulate.html">accumulate()</a></code> what <code><a href="../reference/reduce.html">reduce2()</a></code> is to <code><a href="../reference/reduce.html">reduce()</a></code>.</p></li>
</ul>
</div>
<div id="rates" class="section level2">
<h2 class="hasAnchor">
<a href="#rates" class="anchor"></a>Rates</h2>
<ul>
<li><p>New <code><a href="../reference/rate-helpers.html">rate_backoff()</a></code> and <code><a href="../reference/rate-helpers.html">rate_delay()</a></code> functions to create rate objects. You can pass rates to <code><a href="../reference/insistently.html">insistently()</a></code>, <code><a href="../reference/insistently.html">slowly()</a></code>, or the lower level function <code><a href="../reference/rate_sleep.html">rate_sleep()</a></code>. This will cause a function to wait for a given amount of time with exponential backoff (increasingly larger waiting times) or for a constant delay.</p></li>
<li>
<p><code><a href="../reference/insistently.html">insistently(f)</a></code> modifies a function, <code>f</code>, so that it is repeatedly called until it succeeds (<a href='https://github.com/richierocks'>@richierocks</a>, <a href='https://github.com/ijlyttle'>@ijlyttle</a>).</p>
<p><code><a href="../reference/insistently.html">slowly()</a></code> modifies a function so that it waits for a given amount of time between calls.</p>
</li>
</ul>
</div>
<div id="partial" class="section level2">
<h2 class="hasAnchor">
<a href="#partial" class="anchor"></a><code><a href="../reference/partial.html">partial()</a></code>
</h2>
<p>The interface of <code><a href="../reference/partial.html">partial()</a></code> has been simplified. It now supports quasiquotation to control the timing of evaluation, and the <code><a href="https://rlang.r-lib.org/reference/call_modify.html">rlang::call_modify()</a></code> syntax to control the position of partialised arguments.</p>
<ul>
<li>
<p><code><a href="../reference/partial.html">partial()</a></code> now supports empty <code>... =</code> argument to specify the position of future arguments, relative to partialised ones. This syntax is borrowed from (and implemented with) <code><a href="https://rlang.r-lib.org/reference/call_modify.html">rlang::call_modify()</a></code>.</p>
<p>To prevent partial matching of <code>...</code> on <code>...f</code>, the latter has been renamed to <code>.f</code>, which is more consistent with other purrr function signatures.</p>
</li>
<li><p><code><a href="../reference/partial.html">partial()</a></code> now supports quasiquotation. When you unquote an argument, it is evaluated only once at function creation time. This is more flexible than the <code>.lazy</code> argument since you can control the timing of evaluation for each argument. Consequently, <code>.lazy</code> is soft-deprecated (<a href='https://github.com/tidyverse/purrr/issues/457'>#457</a>).</p></li>
<li><p>Fixed an infinite loop when partialised function is given the same name as the original function (<a href='https://github.com/tidyverse/purrr/issues/387'>#387</a>).</p></li>
<li><p><code><a href="../reference/partial.html">partial()</a></code> now calls <code>as_closure()</code> on primitive functions to ensure argument matching (<a href='https://github.com/tidyverse/purrr/issues/360'>#360</a>).</p></li>
<li>
<p>The <code>.lazy</code> argument of <code><a href="../reference/partial.html">partial()</a></code> is soft-deprecated in favour of quasiquotation:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Before</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="../reference/partial.html">partial</a></span>(fn, <span class="dt">u =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>), <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">1</span>), <span class="dt">.lazy =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># After</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="../reference/partial.html">partial</a></span>(fn, <span class="dt">u =</span> <span class="op">!!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>), <span class="dt">n =</span> <span class="op">!!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">1</span>))  <span class="co"># All constant</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw"><a href="../reference/partial.html">partial</a></span>(fn, <span class="dt">u =</span> <span class="op">!!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Uniform">runif</a></span>(<span class="dv">1</span>), <span class="dt">n =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">1</span>))    <span class="co"># First constant</span></a></code></pre></div>
</li>
</ul>
</div>
<div id="minor-improvements-and-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-fixes" class="anchor"></a>Minor improvements and fixes</h2>
<ul>
<li><p>The tibble package is now in Suggests rather than Imports. This brings the hard dependency of purrr to just rlang and magrittr.</p></li>
<li><p><code><a href="../reference/compose.html">compose()</a></code> now returns an identity function when called without inputs.</p></li>
<li><p>Functions created with <code><a href="../reference/compose.html">compose()</a></code> now have the same formal parameters as the first function to be called. They also feature a more informative print method that prints all composed functions in turn (<a href='https://github.com/egnha'>@egnha</a>, <a href='https://github.com/tidyverse/purrr/issues/366'>#366</a>).</p></li>
<li><p>New <code>.dir</code> argument in <code><a href="../reference/compose.html">compose()</a></code>. When set to <code>"forward"</code>, the functions are composed from left to right rather than right to left.</p></li>
<li><p><code><a href="../reference/list_modify.html">list_modify()</a></code> now supports the <code><a href="../reference/zap.html">zap()</a></code> sentinel (reexported from rlang) to remove elements from lists. Consequently, removing elements with the ambiguous sentinel <code>NULL</code> is soft-deprecated.</p></li>
<li><p>The requirements of <code><a href="../reference/list_modify.html">list_modify()</a></code> and <code><a href="../reference/list_modify.html">list_merge()</a></code> have been relaxed. Previously it required both the modified lists and the inputs to be either named or unnamed. This restriction now only applies to inputs in <code>...</code>. When inputs are all named, they are matched to the list by name. When they are all unnamed, they are matched positionally. Otherwise, this is an error.</p></li>
<li><p>Fixed ordering of names returned by <code><a href="../reference/reduce_right.html">accumulate_right()</a></code> output. They now correspond to the order of inputs.</p></li>
<li><p>Fixed names of <code><a href="../reference/accumulate.html">accumulate()</a></code> output when <code>.init</code> is supplied.</p></li>
<li><p><code><a href="../reference/compose.html">compose()</a></code> now supports composition with lambdas (<a href='https://github.com/ColinFay'>@ColinFay</a>, <a href='https://github.com/tidyverse/purrr/issues/556'>#556</a>)</p></li>
<li><p>Fixed a <code><a href="../reference/map2.html">pmap()</a></code> crash with empty lists on the Win32 platform (<a href='https://github.com/tidyverse/purrr/issues/565'>#565</a>).</p></li>
<li><p><code>modify_depth</code> now has <code>.ragged</code> argument evaluates correctly to <code>TRUE</code> by default when <code>.depth &lt; 0</code> (<a href='https://github.com/cderv'>@cderv</a>, <a href='https://github.com/tidyverse/purrr/issues/530'>#530</a>).</p></li>
<li><p><code><a href="../reference/accumulate.html">accumulate()</a></code> now inherits names from their first input (<a href='https://github.com/AshesITR'>@AshesITR</a>, <a href='https://github.com/tidyverse/purrr/issues/446'>#446</a>).</p></li>
<li><p><code><a href="../reference/attr_getter.html">attr_getter()</a></code> no longer uses partial matching. For example, if an <code>x</code> object has a <code>labels</code> attribute but no <code>label</code> attribute, <code>attr_getter("label")(x)</code> will no longer extract the <code>labels</code> attribute (<a href='https://github.com/tidyverse/purrr/issues/460'>#460</a>, <a href='https://github.com/huftis'>@huftis</a>).</p></li>
<li><p><code><a href="../reference/flatten.html">flatten_dfr()</a></code> and <code><a href="../reference/flatten.html">flatten_dfc()</a></code> now aborts if dplyr is not installed. (<a href='https://github.com/tidyverse/purrr/issues/454'>#454</a>)</p></li>
<li><p><code><a href="../reference/imap.html">imap_dfr()</a></code> now works with <code>.id</code> argument is provided (<a href='https://github.com/tidyverse/purrr/issues/429'>#429</a>)</p></li>
<li><p><code><a href="../reference/list_modify.html">list_modify()</a></code>, <code><a href="../reference/list_modify.html">update_list()</a></code> and <code><a href="../reference/list_modify.html">list_merge()</a></code> now handle duplicate duplicate argument names correctly (<a href='https://github.com/tidyverse/purrr/issues/441'>#441</a>, <a href='https://github.com/mgirlich'>@mgirlich</a>).</p></li>
<li><p><code>map_raw</code>, <code>imap_raw</code>, <code>flatten_raw</code>, <code>invoke_map_raw</code>, <code>map2_raw</code> and <code>pmap_raw</code> added to support raw vectors. (<a href='https://github.com/tidyverse/purrr/issues/455'>#455</a>, <a href='https://github.com/romainfrancois'>@romainfrancois</a>)</p></li>
<li><p><code><a href="../reference/flatten.html">flatten()</a></code> now supports raw and complex elements.</p></li>
<li><p><code><a href="../reference/array-coercion.html">array_branch()</a></code> and <code><a href="../reference/array-coercion.html">array_tree()</a></code> now retain the <code><a href="https://www.rdocumentation.org/packages/base/topics/dimnames">dimnames()</a></code> of the input array (<a href='https://github.com/tidyverse/purrr/issues/584'>#584</a>, <a href='https://github.com/flying-sheep'>@flying-sheep</a>)</p></li>
<li><p><code><a href="../reference/pluck.html">pluck()</a></code> no longer flattens lists of arguments. You can still do it manually with <code>!!!</code>. This change is for consistency with other dots-collecting functions of the tidyverse.</p></li>
<li>
<p><code><a href="../reference/map.html">map_at()</a></code>, <code><a href="../reference/lmap.html">lmap_at()</a></code> and <code><a href="../reference/modify.html">modify_at()</a></code> now supports selection using <code>vars()</code> and <code>tidyselect</code> (<a href='https://github.com/ColinFay'>@ColinFay</a>, <a href='https://github.com/tidyverse/purrr/issues/608'>#608</a>).</p>
<p>Note that for now you need to import <code>vars()</code> from dplyr or call it qualified like <code><a href="https://dplyr.tidyverse.org/reference/vars.html">dplyr::vars()</a></code>. It will be reexported from rlang in a future release.</p>
</li>
<li><p><code><a href="../reference/detect.html">detect()</a></code> now has a .default argument to specify the value returned when nothing is detected (<a href='https://github.com/tidyverse/purrr/issues/622'>#622</a>, <a href='https://github.com/ColinFay'>@ColinFay</a>).</p></li>
</ul>
</div>
<div id="life-cycle" class="section level2">
<h2 class="hasAnchor">
<a href="#life-cycle" class="anchor"></a>Life cycle</h2>
<div id="dir-arguments" class="section level3">
<h3 class="hasAnchor">
<a href="#dir-arguments" class="anchor"></a><code>.dir</code> arguments</h3>
<p>We have standardised the purrr API for reverse iteration with a common <code>.dir</code> argument.</p>
<ul>
<li>
<p><code><a href="../reference/reduce_right.html">reduce_right()</a></code> is soft-deprecated and replaced by a new <code>.dir</code> argument of <code><a href="../reference/reduce.html">reduce()</a></code>:</p>
<pre class="{r}"><code><a href="../reference/reduce_right.html"># Before:
reduce_right(1:3, f)

# After:
reduce(1:3, f, .dir = "backward")</a></code></pre>
<p>Note that the details of the computation have changed. Whereas <code><a href="../reference/reduce_right.html">reduce_right()</a></code> computed <code>f(f(3, 2), 1)</code>, it now computes <code>f(1, f(2, 3))</code>. This is the standard way of reducing from the right.</p>
<p>To produce the exact same reduction as <code><a href="../reference/reduce_right.html">reduce_right()</a></code>, simply reverse your vector and use a left reduction:</p>
<pre class="{r}"><code><a href="../reference/reduce_right.html"># Before:
reduce_right(1:3, f)

# After:
reduce(rev(1:3), f)</a></code></pre>
</li>
<li><p><code><a href="../reference/reduce_right.html">reduce2_right()</a></code> is soft-deprecated without replacement. It is not clear what algorithmic properties should a right reduction have in this case. Please reach out if you know about a use case for a right reduction with a ternary function.</p></li>
<li>
<p><code><a href="../reference/reduce_right.html">accumulate_right()</a></code> is soft-deprecated and replaced by the new <code>.dir</code> argument of <code><a href="../reference/accumulate.html">accumulate()</a></code>. Note that the algorithm has slightly changed: the accumulated value is passed to the right rather than the left, which is consistent with a right reduction.</p>
<pre class="{r}"><code><a href="../reference/reduce_right.html"># Before:
accumulate_right(1:3, f)

# After:
accumulate(1:3, f, .dir = "backward")</a></code></pre>
</li>
<li>
<p>The <code>.right</code> argument of <code><a href="../reference/detect.html">detect()</a></code> and <code><a href="../reference/detect.html">detect_index()</a></code> is soft-deprecated and renamed to <code>.dir</code> for consistency with other functions and clarity of the interface.</p>
<pre class="{r}"><code><a href="../reference/detect.html"># Before
detect(x, f, .right = TRUE)

# After
detect(x, f, .dir = "backward")</a></code></pre>
</li>
</ul>
</div>
<div id="simplification-of-partial" class="section level3">
<h3 class="hasAnchor">
<a href="#simplification-of-partial" class="anchor"></a>Simplification of <code><a href="../reference/partial.html">partial()</a></code>
</h3>
<p>The interface of <code><a href="../reference/partial.html">partial()</a></code> has been simplified (see more about <code><a href="../reference/partial.html">partial()</a></code> below):</p>
<ul>
<li><p>The <code>.lazy</code> argument of <code><a href="../reference/partial.html">partial()</a></code> is soft-deprecated in favour of quasiquotation.</p></li>
<li><p>We had to rename <code>...f</code> to <code>.f</code> in <code><a href="../reference/partial.html">partial()</a></code> in order to support <code>... =</code> argument (which would otherwise partial-match on <code>...f</code>). This also makes <code><a href="../reference/partial.html">partial()</a></code> more consistent with other purrr function signatures.</p></li>
</ul>
</div>
<div id="retirement-of-invoke" class="section level3">
<h3 class="hasAnchor">
<a href="#retirement-of-invoke" class="anchor"></a>Retirement of <code><a href="../reference/invoke.html">invoke()</a></code>
</h3>
<p><code><a href="../reference/invoke.html">invoke()</a></code> and <code><a href="../reference/invoke.html">invoke_map()</a></code> are retired in favour of <code><a href="../reference/exec.html">exec()</a></code>. Note that retired functions are no longer under active development, but continue to be maintained undefinitely in the package.</p>
<ul>
<li>
<p><code><a href="../reference/invoke.html">invoke()</a></code> is retired in favour of the <code><a href="../reference/exec.html">exec()</a></code> function, reexported from rlang. <code><a href="../reference/exec.html">exec()</a></code> evaluates a function call built from its inputs and supports tidy dots:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Before:</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="../reference/invoke.html">invoke</a></span>(mean, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># After</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw"><a href="../reference/exec.html">exec</a></span>(mean, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="op">!!!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<p>Note that retired functions are not removed from the package and will be maintained undefinitely.</p>
</li>
<li>
<p><code><a href="../reference/invoke.html">invoke_map()</a></code> is retired without replacement because it is more complex to understand than the corresponding code using <code><a href="../reference/map.html">map()</a></code>, <code><a href="../reference/map2.html">map2()</a></code> and <code><a href="../reference/exec.html">exec()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Before:</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../reference/invoke.html">invoke_map</a></span>(fns, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(args))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw"><a href="../reference/invoke.html">invoke_map</a></span>(fns, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(args1, args2))</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co"># After:</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="kw"><a href="../reference/map.html">map</a></span>(fns, exec, <span class="op">!!!</span>args)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="kw"><a href="../reference/map2.html">map2</a></span>(fns, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(args1, args2), <span class="cf">function</span>(fn, args) <span class="kw"><a href="../reference/exec.html">exec</a></span>(fn, <span class="op">!!!</span>args))</a></code></pre></div>
</li>
</ul>
</div>
<div id="other-lifecycle-changes" class="section level3">
<h3 class="hasAnchor">
<a href="#other-lifecycle-changes" class="anchor"></a>Other lifecycle changes</h3>
<ul>
<li><p><code>%@%</code> is soft-deprecated, please use the operator exported in rlang instead. The latter features an interface more consistent with <code>@</code> as it uses NSE, supports S4 fields, and has an assignment variant.</p></li>
<li>
<p>Removing elements from lists using <code>NULL</code> in <code><a href="../reference/list_modify.html">list_modify()</a></code> is soft-deprecated. Please use the new <code><a href="../reference/zap.html">zap()</a></code> sentinel reexported from rlang instead:</p>
<pre class="{r}"><code><a href="../reference/list_modify.html">  # Before:
  list_modify(x, foo = NULL)

  # After:
  list_modify(x, foo = zap())</a></code></pre>
<p>This change is motivated by the ambiguity of <code>NULL</code> as a deletion sentinel because <code>NULL</code> is also a valid value in lists. In the future, <code>NULL</code> will set an element to <code>NULL</code> rather than removing the element.</p>
</li>
<li><p><code><a href="../reference/rerun.html">rerun()</a></code> is now in the questioning stage because we are no longer convinced NSE functions are a good fit for purrr. Also, <code><a href="../reference/rerun.html">rerun(n, x)</a></code> can just as easily be expressed as <code><a href="../reference/map.html">map(1:n, ~ x)</a></code> (with the added benefit of being passed the current index as argument to the lambda).</p></li>
<li><p><code><a href="../reference/invoke.html">map_call()</a></code> is defunct.</p></li>
</ul>
</div>
</div>
</div>
    <div id="purrr-0-2-5" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-2-5" class="anchor"></a>purrr 0.2.5<small> 2018-05-29 </small>
</h1>
<ul>
<li>This is a maintenance release following the release of dplyr 0.7.5.</li>
</ul>
</div>
    <div id="purrr-0-2-4" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-2-4" class="anchor"></a>purrr 0.2.4<small> 2017-10-18 </small>
</h1>
<ul>
<li>Fixes for R 3.1.</li>
</ul>
</div>
    <div id="purrr-0-2-3" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-2-3" class="anchor"></a>purrr 0.2.3<small> 2017-08-02 </small>
</h1>
<div id="breaking-changes-1" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes-1" class="anchor"></a>Breaking changes</h2>
<p>We noticed the following issues during reverse dependencies checks:</p>
<ul>
<li><p>If <code><a href="../reference/reduce.html">reduce()</a></code> fails with this message: <code>Error: `.x` is empty, and no `.init` supplied</code>, this is because <code><a href="../reference/reduce.html">reduce()</a></code> now returns <code>.init</code> when <code>.x</code> is empty. Fix the problem by supplying an appropriate argument to <code>.init</code>, or by providing special behaviour when <code>.x</code> has length 0.</p></li>
<li><p>The type predicates have been migrated to rlang. Consequently the <code>bare-type-predicates</code> documentation topic is no longer in purrr, which might cause a warning if you cross-reference it.</p></li>
</ul>
</div>
<div id="dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h2>
<p>purrr no longer depends on lazyeval or Rcpp (or dplyr, as of the previous version). This makes the dependency graph of the tidyverse simpler, and makes purrr more suitable as a dependency of lower-level packages.</p>
<p>There have also been two changes to eliminate name conflicts between purrr and dplyr:</p>
<ul>
<li><p><code>order_by()</code>, <code>sort_by()</code> and <code>split_by()</code> have been removed. <code>order_by()</code> conflicted with <code><a href="https://dplyr.tidyverse.org/reference/order_by.html">dplyr::order_by()</a></code> and the complete family doesn’t feel that useful. Use tibbles instead (<a href='https://github.com/tidyverse/purrr/issues/217'>#217</a>).</p></li>
<li><p><code>contains()</code> has been renamed to <code><a href="../reference/has_element.html">has_element()</a></code> to avoid conflicts with dplyr (<a href='https://github.com/tidyverse/purrr/issues/217'>#217</a>).</p></li>
</ul>
</div>
<div id="pluck" class="section level2">
<h2 class="hasAnchor">
<a href="#pluck" class="anchor"></a>pluck()</h2>
<p>The plucking mechanism used for indexing into data structures with <code><a href="../reference/map.html">map()</a></code> has been extracted into the function <code><a href="../reference/pluck.html">pluck()</a></code>. Plucking is often more readable to extract an element buried in a deep data structure. Compare this syntax-heavy extraction which reads non-linearly:</p>
<pre><code>accessor(x[[1]])$foo</code></pre>
<p>to the equivalent pluck:</p>
<pre><code>x %&gt;% pluck(1, accessor, "foo")</code></pre>
</div>
<div id="map-helpers" class="section level2">
<h2 class="hasAnchor">
<a href="#map-helpers" class="anchor"></a>Map helpers</h2>
<ul>
<li>
<p><code><a href="../reference/as_mapper.html">as_function()</a></code> is now <code><a href="../reference/as_mapper.html">as_mapper()</a></code> because it is a tranformation that makes sense primarily for mapping functions, not in general (<a href='https://github.com/tidyverse/purrr/issues/298'>#298</a>). <code>.null</code> has been renamed to <code>.default</code> to better reflect its intent (<a href='https://github.com/tidyverse/purrr/issues/298'>#298</a>). <code>.default</code> is returned whenever an element is absent or empty (<a href='https://github.com/tidyverse/purrr/issues/231'>#231</a>, <a href='https://github.com/tidyverse/purrr/issues/254'>#254</a>).</p>
<p><code><a href="../reference/as_mapper.html">as_mapper()</a></code> sanitises primitive functions by transforming them to closures with standardised argument names (using <code><a href="https://rlang.r-lib.org/reference/as_function.html">rlang::as_closure()</a></code>). For instance <code>+</code> is transformed to <code>function(.x, .y) .x + .y</code>. This results in proper argument matching so that <code>map(1:10, partial(</code>-<code>, .x = 5))</code> produces <code><a href="https://www.rdocumentation.org/packages/base/topics/list">list(5 - 1, 5 - 2, ...)</a></code>.</p>
</li>
<li><p>Recursive indexing can now extract objects out of environments (<a href='https://github.com/tidyverse/purrr/issues/213'>#213</a>) and S4 objects (<a href='https://github.com/tidyverse/purrr/issues/200'>#200</a>), as well as lists.</p></li>
<li><p><code><a href="../reference/attr_getter.html">attr_getter()</a></code> makes it possible to extract from attributes like <code><a href="../reference/map.html">map(list(iris, mtcars), attr_getter("row.names"))</a></code>.</p></li>
<li><p>The argument list for formula-functions has been tweaked so that you can refer to arguments by position with <code>..1</code>, <code>..2</code>, and so on. This makes it possible to use the formula shorthand for functions with more than two arguments (<a href='https://github.com/tidyverse/purrr/issues/289'>#289</a>).</p></li>
<li><p><code><a href="../reference/safely.html">possibly()</a></code>, <code><a href="../reference/safely.html">safely()</a></code> and friends no longer capture interrupts: this means that you can now terminate a mapper using one of these with Escape or Ctrl + C (<a href='https://github.com/tidyverse/purrr/issues/314'>#314</a>)</p></li>
</ul>
</div>
<div id="map-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#map-functions" class="anchor"></a>Map functions</h2>
<ul>
<li><p>All map functions now treat <code>NULL</code> the same way as an empty vector (<a href='https://github.com/tidyverse/purrr/issues/199'>#199</a>), and return an empty vector if any input is an empty vector.</p></li>
<li><p>All <code><a href="../reference/map.html">map()</a></code> functions now force their arguments in the same way that base R does for <code><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply()</a></code> (<a href='https://github.com/tidyverse/purrr/issues/191'>#191</a>). This makes <code><a href="../reference/map.html">map()</a></code> etc easier to use when generating functions.</p></li>
<li><p>A new family of “indexed” map functions, <code><a href="../reference/imap.html">imap()</a></code>, <code><a href="../reference/imap.html">imap_lgl()</a></code> etc, provide a short-hand for <code><a href="../reference/map2.html">map2(x, names(x))</a></code> or <code><a href="../reference/map2.html">map2(x, seq_along(x))</a></code> (<a href='https://github.com/tidyverse/purrr/issues/240'>#240</a>).</p></li>
<li><p>The data frame suffix <code>_df</code> has been (soft) deprecated in favour of <code>_dfr</code> to more clearly indicate that it’s a row-bind. All variants now also have a <code>_dfc</code> for column binding (<a href='https://github.com/tidyverse/purrr/issues/167'>#167</a>). (These will not be terribly useful until <code><a href="https://dplyr.tidyverse.org/reference/bind.html">dplyr::bind_rows()</a></code>/<code><a href="https://dplyr.tidyverse.org/reference/bind.html">dplyr::bind_cols()</a></code> have better semantics for vectors.)</p></li>
</ul>
</div>
<div id="modify-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#modify-functions" class="anchor"></a>Modify functions</h2>
<p>A new <code><a href="../reference/modify.html">modify()</a></code> family returns the same output of the type as the input <code>.x</code>. This is in contrast to the <code><a href="../reference/map.html">map()</a></code> family which always returns a list, regardless of the input type.</p>
<p>The modify functions are S3 generics. However their default methods should be sufficient for most classes since they rely on the semantics of <code>[&lt;-</code>. <code><a href="../reference/modify.html">modify.default()</a></code> is thus a shorthand for <code>x[] &lt;- map(x, f)</code>.</p>
<ul>
<li><p><code><a href="../reference/modify.html">at_depth()</a></code> has been renamed to <code><a href="../reference/modify.html">modify_depth()</a></code>.</p></li>
<li><p><code><a href="../reference/modify.html">modify_depth()</a></code> gains new <code>.ragged</code> argument, and negative depths are now computed relative to the deepest component of the list (<a href='https://github.com/tidyverse/purrr/issues/236'>#236</a>).</p></li>
</ul>
</div>
<div id="new-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions" class="anchor"></a>New functions</h2>
<ul>
<li><p><code><a href="../reference/safely.html">auto_browse(f)</a></code> returns a new function that automatically calls <code><a href="https://www.rdocumentation.org/packages/base/topics/browser">browser()</a></code> if <code>f</code> throws an error (<a href='https://github.com/tidyverse/purrr/issues/281'>#281</a>).</p></li>
<li><p><code><a href="../reference/vec_depth.html">vec_depth()</a></code> computes the depth (i.e. the number of levels of indexing) or a vector (<a href='https://github.com/tidyverse/purrr/issues/243'>#243</a>).</p></li>
<li><p><code><a href="../reference/reduce.html">reduce2()</a></code> and <code><a href="../reference/reduce_right.html">reduce2_right()</a></code> make it possible to reduce with a 3 argument function where the first argument is the accumulated value, the second argument is <code>.x</code>, and the third argument is <code>.y</code> (<a href='https://github.com/tidyverse/purrr/issues/163'>#163</a>).</p></li>
<li><p><code><a href="../reference/list_modify.html">list_modify()</a></code> extends <code>stats::modifyList()</code> to replace by position if the list is not named.(<a href='https://github.com/tidyverse/purrr/issues/201'>#201</a>). <code><a href="../reference/list_modify.html">list_merge()</a></code> operates similarly to <code><a href="../reference/list_modify.html">list_modify()</a></code> but combines instead of replacing (<a href='https://github.com/tidyverse/purrr/issues/322'>#322</a>).</p></li>
<li><p>The legacy function <code><a href="../reference/list_modify.html">update_list()</a></code> is basically a version of <code>list_modify</code> that evaluates formulas within the list. It is likely to be deprecated in the future in favour of a tidyeval interface such as a list method for <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">dplyr::mutate()</a></code>.</p></li>
</ul>
</div>
<div id="minor-improvements-and-bug-fixes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-improvements-and-bug-fixes" class="anchor"></a>Minor improvements and bug fixes</h2>
<ul>
<li><p>Thanks to <a href='https://github.com/dchiu911'>@dchiu911</a>, the unit test coverage of purrr is now much greater.</p></li>
<li><p>All predicate functions are re-exported from rlang (<a href='https://github.com/tidyverse/purrr/issues/124'>#124</a>).</p></li>
<li><p><code><a href="../reference/keep.html">compact()</a></code> now works with standard mapper conventions (<a href='https://github.com/tidyverse/purrr/issues/282'>#282</a>).</p></li>
<li><p><code><a href="../reference/cross.html">cross_n()</a></code> has been renamed to <code><a href="../reference/cross.html">cross()</a></code>. The <code>_n</code> suffix was removed for consistency with <code><a href="../reference/map2.html">pmap()</a></code> (originally called <code>map_n()</code> at the start of the project) and <code><a href="../reference/transpose.html">transpose()</a></code> (originally called <code>zip_n()</code>). Similarly, <code><a href="../reference/cross.html">cross_d()</a></code> has been renamed to <code><a href="../reference/cross.html">cross_df()</a></code> for consistency with <code><a href="../reference/map.html">map_df()</a></code>.</p></li>
<li><p><code><a href="../reference/every.html">every()</a></code> and <code><a href="../reference/every.html">some()</a></code> now return <code>NA</code> if present in the input (<a href='https://github.com/tidyverse/purrr/issues/174'>#174</a>).</p></li>
<li><p><code><a href="../reference/invoke.html">invoke()</a></code> uses a more robust approach to generate the argument list (<a href='https://github.com/tidyverse/purrr/issues/249'>#249</a>) It no longer uses lazyeval to figure out which enviroment a character <code>f</code> comes from.</p></li>
<li><p><code><a href="../reference/is_numeric.html">is_numeric()</a></code> and <code><a href="../reference/is_numeric.html">is_scalar_numeric()</a></code> are deprecated because they don’t test for what you might expect at first sight.</p></li>
<li><p><code><a href="../reference/reduce.html">reduce()</a></code> now throws an error if <code>.x</code> is empty and <code>.init</code> is not supplied.</p></li>
<li><p>Deprecated functions <code>flatmap()</code>, <code>map3()</code>, <code>map_n()</code>, <code>walk3()</code>, <code>walk_n()</code>, <code>zip2()</code>, <code>zip3()</code>, <code>zip_n()</code> have been removed.</p></li>
<li><p><code><a href="../reference/map2.html">pmap()</a></code> coerces data frames to lists to avoid the expensive <code>[.data.frame</code> which provides security that is unneeded here (<a href='https://github.com/tidyverse/purrr/issues/220'>#220</a>).</p></li>
<li><p><code><a href="../reference/rdunif.html">rdunif()</a></code> checks its inputs for validity (<a href='https://github.com/tidyverse/purrr/issues/211'>#211</a>).</p></li>
<li><p><code><a href="../reference/set_names.html">set_names()</a></code> can now take a function to tranform the names programmatically (<a href='https://github.com/tidyverse/purrr/issues/276'>#276</a>), and you can supply names in <code>...</code> to reduce typing even more more (<a href='https://github.com/tidyverse/purrr/issues/316'>#316</a>). <code><a href="../reference/set_names.html">set_names()</a></code> is now powered by <code><a href="https://rlang.r-lib.org/reference/set_names.html">rlang::set_names()</a></code>.</p></li>
<li><p><code><a href="../reference/safely.html">safely()</a></code> now actually uses the <code>quiet</code> argument (<a href='https://github.com/tidyverse/purrr/issues/296'>#296</a>).</p></li>
<li><p><code><a href="../reference/transpose.html">transpose()</a></code> now matches by name if available (<a href='https://github.com/tidyverse/purrr/issues/164'>#164</a>). You can override the default choice with the new <code>.names</code> argument.</p></li>
<li><p>The function argument of <code><a href="../reference/detect.html">detect()</a></code> and <code><a href="../reference/detect.html">detect_index()</a></code> have been renamed from <code>.p</code> to <code>.f</code>. This is because they have mapper semantics rather than predicate semantics.</p></li>
</ul>
</div>
</div>
    <div id="purrr-0-2-2-1" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-2-2-1" class="anchor"></a>purrr 0.2.2.1<small> Unreleased </small>
</h1>
<p>This is a compatibility release with dplyr 0.6.0.</p>
<ul>
<li>All data-frame based mappers have been removed in favour of new functions and idioms in the tidyverse. <code>dmap()</code>, <code>dmap_at()</code>, <code>dmap_if()</code>, <code>invoke_rows()</code>, <code>slice_rows()</code>, <code>map_rows()</code>, <code>by_slice()</code>, <code>by_row()</code>, and <code>unslice()</code> have been moved to purrrlyr. This is a bit of an aggresive change but it allows us to make the dependencies much lighter.</li>
</ul>
</div>
    <div id="purrr-0-2-2" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-2-2" class="anchor"></a>purrr 0.2.2<small> 2016-06-18 </small>
</h1>
<ul>
<li><p>Fix for dev tibble support.</p></li>
<li><p><code><a href="../reference/as_mapper.html">as_function()</a></code> now supports list arguments which allow recursive indexing using either names or positions. They now always stop when encountering the first NULL (<a href='https://github.com/tidyverse/purrr/issues/173'>#173</a>).</p></li>
<li><p><code>accumulate</code> and <code>reduce</code> correctly pass extra arguments to the worker function.</p></li>
</ul>
</div>
    <div id="purrr-0-2-1" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-2-1" class="anchor"></a>purrr 0.2.1<small> 2016-02-13 </small>
</h1>
<ul>
<li><p><code><a href="../reference/as_mapper.html">as_function()</a></code> gains a <code>.null</code> argument that for character and numeric values allows you to specify what to return for null/absent elements (<a href='https://github.com/tidyverse/purrr/issues/110'>#110</a>). This can be used with any map function, e.g. <code><a href="../reference/map.html">map_int(x, 1, .null = NA)</a></code></p></li>
<li><p><code><a href="../reference/as_mapper.html">as_function()</a></code> is now generic.</p></li>
<li><p>New <code><a href="https://rlang.r-lib.org/reference/is_function.html">is_function()</a></code> that returns <code>TRUE</code> only for regular functions.</p></li>
<li><p>Fix crash on GCC triggered by <code>invoke_rows()</code>.</p></li>
</ul>
</div>
    <div id="purrr-0-2-0" class="section level1">
<h1 class="page-header">
<a href="#purrr-0-2-0" class="anchor"></a>purrr 0.2.0<small> 2016-01-04 </small>
</h1>
<div id="new-functions-1" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions-1" class="anchor"></a>New functions</h2>
<ul>
<li>
<p>There are two handy infix functions:</p>
<ul>
<li>
<code>x %||% y</code> is shorthand for <code>if (is.null(x)) y else x</code> (<a href='https://github.com/tidyverse/purrr/issues/109'>#109</a>).</li>
<li>
<code>x %@% "a"</code> is shorthand for <code><a href="https://www.rdocumentation.org/packages/base/topics/attr">attr(x, "a", exact = TRUE)</a></code> (<a href='https://github.com/tidyverse/purrr/issues/69'>#69</a>).</li>
</ul>
</li>
<li><p><code><a href="../reference/accumulate.html">accumulate()</a></code> has been added to handle recursive folding. It is shortand for <code><a href="https://www.rdocumentation.org/packages/base/topics/funprog">Reduce(f, .x, accumulate = TRUE)</a></code> and follows a similar syntax to <code><a href="../reference/reduce.html">reduce()</a></code> (<a href='https://github.com/tidyverse/purrr/issues/145'>#145</a>). A right-hand version <code><a href="../reference/reduce_right.html">accumulate_right()</a></code> was also added.</p></li>
<li><p><code><a href="../reference/map.html">map_df()</a></code> row-binds output together. It’s the equivalent of <code>plyr::ldply()</code> (<a href='https://github.com/tidyverse/purrr/issues/127'>#127</a>)</p></li>
<li><p><code><a href="../reference/flatten.html">flatten()</a></code> is now type-stable and always returns a list. To return a simpler vector, use <code><a href="../reference/flatten.html">flatten_lgl()</a></code>, <code><a href="../reference/flatten.html">flatten_int()</a></code>, <code><a href="../reference/flatten.html">flatten_dbl()</a></code>, <code><a href="../reference/flatten.html">flatten_chr()</a></code>, or <code><a href="../reference/flatten.html">flatten_df()</a></code>.</p></li>
<li><p><code><a href="../reference/invoke.html">invoke()</a></code> has been overhauled to be more useful: it now works similarly to <code><a href="../reference/invoke.html">map_call()</a></code> when <code>.x</code> is NULL, and hence <code><a href="../reference/invoke.html">map_call()</a></code> has been deprecated. <code><a href="../reference/invoke.html">invoke_map()</a></code> is a vectorised complement to <code><a href="../reference/invoke.html">invoke()</a></code> (<a href='https://github.com/tidyverse/purrr/issues/125'>#125</a>), and comes with typed variants <code><a href="../reference/invoke.html">invoke_map_lgl()</a></code>, <code><a href="../reference/invoke.html">invoke_map_int()</a></code>, <code><a href="../reference/invoke.html">invoke_map_dbl()</a></code>, <code><a href="../reference/invoke.html">invoke_map_chr()</a></code>, and <code><a href="../reference/invoke.html">invoke_map_df()</a></code>.</p></li>
<li><p><code><a href="../reference/transpose.html">transpose()</a></code> replaces <code>zip2()</code>, <code>zip3()</code>, and <code>zip_n()</code> (<a href='https://github.com/tidyverse/purrr/issues/128'>#128</a>). The name more clearly reflects the intent (transposing the first and second levels of list). It no longer has fields argument or the <code>.simplify</code> argument; instead use the new <code><a href="../reference/as_vector.html">simplify_all()</a></code> function.</p></li>
<li><p><code><a href="../reference/safely.html">safely()</a></code>, <code><a href="../reference/safely.html">quietly()</a></code>, and <code><a href="../reference/safely.html">possibly()</a></code> are experimental functions for working with functions with side-effects (e.g. printed output, messages, warnings, and errors) (<a href='https://github.com/tidyverse/purrr/issues/120'>#120</a>). <code><a href="../reference/safely.html">safely()</a></code> is a version of <code><a href="https://www.rdocumentation.org/packages/base/topics/try">try()</a></code> that modifies a function (rather than an expression), and always returns a list with two components, <code>result</code> and <code>error</code>.</p></li>
<li><p><code><a href="../reference/along.html">list_along()</a></code> and <code><a href="../reference/rep_along.html">rep_along()</a></code> generalise the idea of <code><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq_along()</a></code>. (<a href='https://github.com/tidyverse/purrr/issues/122'>#122</a>).</p></li>
<li><p><code><a href="https://rlang.r-lib.org/reference/type-predicates.html">is_null()</a></code> is the snake-case version of <code><a href="https://www.rdocumentation.org/packages/base/topics/NULL">is.null()</a></code>.</p></li>
<li><p><code><a href="../reference/map2.html">pmap()</a></code> (parallel map) replaces <code>map_n()</code> (<a href='https://github.com/tidyverse/purrr/issues/132'>#132</a>), and has typed-variants suffixed <code><a href="../reference/map2.html">pmap_lgl()</a></code>, <code><a href="../reference/map2.html">pmap_int()</a></code>, <code><a href="../reference/map2.html">pmap_dbl()</a></code>, <code><a href="../reference/map2.html">pmap_chr()</a></code>, and <code><a href="../reference/map2.html">pmap_df()</a></code>.</p></li>
<li><p><code><a href="../reference/set_names.html">set_names()</a></code> is a snake-case alternative to <code><a href="https://www.rdocumentation.org/packages/stats/topics/setNames">setNames()</a></code> with stricter equality checking, and more convenient defaults for pipes: <code>x %&gt;% set_names()</code> is equivalent to <code><a href="https://www.rdocumentation.org/packages/stats/topics/setNames">setNames(x, x)</a></code> (<a href='https://github.com/tidyverse/purrr/issues/119'>#119</a>).</p></li>
</ul>
</div>
<div id="row-based-functionals" class="section level2">
<h2 class="hasAnchor">
<a href="#row-based-functionals" class="anchor"></a>Row based functionals</h2>
<p>We are still figuring out what belongs in dplyr and what belongs in purrr. Expect much experimentation and many changes with these functions.</p>
<ul>
<li><p><code><a href="../reference/map.html">map()</a></code> now always returns a list. Data frame support has been moved to <code><a href="../reference/map.html">map_df()</a></code> and <code>dmap()</code>. The latter supports sliced data frames as a shortcut for the combination of <code>by_slice()</code> and <code>dmap()</code>: <code>x %&gt;% by_slice(dmap, fun, .collate = "rows")</code>. The conditional variants <code>dmap_at()</code> and <code>dmap_if()</code> also support sliced data frames and will recycle scalar results to the slice size.</p></li>
<li><p><code>map_rows()</code> has been renamed to <code>invoke_rows()</code>. As other rows-based functionals, it collates results inside lists by default, but with column collation this function is equivalent to <code>plyr::mdply()</code>.</p></li>
<li><p>The rows-based functionals gain a <code>.to</code> option to name the output column as well as a <code>.collate</code> argument. The latter allows to collate the output in lists (by default), on columns or on rows. This makes these functions more flexible and more predictable.</p></li>
</ul>
</div>
<div id="bug-fixes-and-minor-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#bug-fixes-and-minor-changes" class="anchor"></a>Bug fixes and minor changes</h2>
<ul>
<li><p><code><a href="../reference/as_mapper.html">as_function()</a></code>, which converts formulas etc to functions, is now exported (<a href='https://github.com/tidyverse/purrr/issues/123'>#123</a>).</p></li>
<li><p><code><a href="../reference/rerun.html">rerun()</a></code> is correctly scoped (<a href='https://github.com/tidyverse/purrr/issues/95'>#95</a>)</p></li>
<li><p><code><a href="../reference/list_modify.html">update_list()</a></code> can now modify an element called <code>x</code> (<a href='https://github.com/tidyverse/purrr/issues/98'>#98</a>).</p></li>
<li><p><code>map*()</code> now use custom C code, rather than relying on <code><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply()</a></code>, <code><a href="https://www.rdocumentation.org/packages/base/topics/mapply">mapply()</a></code> etc. The performance characteristcs are very similar, but it allows us greater control over the output (<a href='https://github.com/tidyverse/purrr/issues/118'>#118</a>).</p></li>
<li><p><code><a href="../reference/map.html">map_lgl()</a></code> now has second argument <code>.f</code>, not <code>.p</code> (<a href='https://github.com/tidyverse/purrr/issues/134'>#134</a>).</p></li>
</ul>
</div>
<div id="deprecated-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#deprecated-functions" class="anchor"></a>Deprecated functions</h2>
<ul>
<li><p><code>flatmap()</code> -&gt; use <code><a href="../reference/map.html">map()</a></code> followed by the appropriate <code><a href="../reference/flatten.html">flatten()</a></code>.</p></li>
<li><p><code><a href="../reference/invoke.html">map_call()</a></code> -&gt; <code><a href="../reference/invoke.html">invoke()</a></code>.</p></li>
<li><p><code>map_n()</code> -&gt; <code><a href="../reference/map2.html">pmap()</a></code>; <code>walk_n()</code> -&gt; <code><a href="../reference/map2.html">pwalk()</a></code>.</p></li>
<li><p><code>map3(x, y, z)</code> -&gt; <code>map_n(list(x, y, z))</code>; <code>walk3(x, y, z) -&gt;</code>pwalk(list(x, y, z))`</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#purrr-0-3-0-9000">0.3.0.9000</a></li>
        <li><a href="#purrr-0-3-0">0.3.0</a></li>
        <li><a href="#purrr-0-2-5">0.2.5</a></li>
        <li><a href="#purrr-0-2-4">0.2.4</a></li>
        <li><a href="#purrr-0-2-3">0.2.3</a></li>
        <li><a href="#purrr-0-2-2-1">0.2.2.1</a></li>
        <li><a href="#purrr-0-2-2">0.2.2</a></li>
        <li><a href="#purrr-0-2-1">0.2.1</a></li>
        <li><a href="#purrr-0-2-0">0.2.0</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="tidyverse">
  <p>purrr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by Lionel Henry, <a href='http://hadley.nz'>Hadley Wickham</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>
      </footer>
   </div>

  

  </body>
</html>

