<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Modify elements selectively — modify • purrr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<!--optional theme-->
<link href="../.css" rel="stylesheet">




<meta property="og:title" content="Modify elements selectively — modify" />
<meta property="og:description" content="Unlike map() and its variants which always return a fixed object
type (list for map(), integer vector for map_int(), etc), the
modify() family always returns the same type as the input object.
modify() is a shortcut for x[[i]] &amp;lt;- f(x[[i]]); return(x).
modify_if() only modifies the elements of x that satisfy a
predicate and leaves the others unchanged. modify_at() only
modifies elements given by names or positions.
modify2() modifies the elements of .x but also passes the
elements of .y to .f, just like map2(). imodify() passes
the names or the indices to .f like imap() does.
modify_depth() only modifies elements at a given level of a
nested data structure.
modify_in() modifies a single element in a pluck() location.

" />
<meta property="og:image" content="https://purrr.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">purrr</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.3.4.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/other-langs.html">Functional programming in other languages</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Releases</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/02/purrr-0-3-0/">Version 0.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2017/08/purrr-0.2.3/">Version 0.2.3</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/purrr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Modify elements selectively</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/purrr/blob/master/R/modify.R'><code>R/modify.R</code></a></small>
    <div class="hidden name"><code>modify.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Unlike <code><a href='map.html'>map()</a></code> and its variants which always return a fixed object
type (list for <code><a href='map.html'>map()</a></code>, integer vector for <code><a href='map.html'>map_int()</a></code>, etc), the
<code>modify()</code> family always returns the same type as the input object.</p><ul>
<li><p><code>modify()</code> is a shortcut for <code>x[[i]] &lt;- f(x[[i]]); return(x)</code>.</p></li>
<li><p><code>modify_if()</code> only modifies the elements of <code>x</code> that satisfy a
predicate and leaves the others unchanged. <code>modify_at()</code> only
modifies elements given by names or positions.</p></li>
<li><p><code>modify2()</code> modifies the elements of <code>.x</code> but also passes the
elements of <code>.y</code> to <code>.f</code>, just like <code><a href='map2.html'>map2()</a></code>. <code>imodify()</code> passes
the names or the indices to <code>.f</code> like <code><a href='imap.html'>imap()</a></code> does.</p></li>
<li><p><code>modify_depth()</code> only modifies elements at a given level of a
nested data structure.</p></li>
<li><p><code><a href='modify_in.html'>modify_in()</a></code> modifies a single element in a <code><a href='pluck.html'>pluck()</a></code> location.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>modify</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.f</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>modify</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.f</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>modify_if</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.p</span>, <span class='va'>.f</span>, <span class='va'>...</span>, .else <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>modify_if</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.p</span>, <span class='va'>.f</span>, <span class='va'>...</span>, .else <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>modify_at</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.at</span>, <span class='va'>.f</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>modify_at</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.at</span>, <span class='va'>.f</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>modify2</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.y</span>, <span class='va'>.f</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>imodify</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.f</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>modify_depth</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.depth</span>, <span class='va'>.f</span>, <span class='va'>...</span>, .ragged <span class='op'>=</span> <span class='va'>.depth</span> <span class='op'>&lt;</span> <span class='fl'>0</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>modify_depth</span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>.depth</span>, <span class='va'>.f</span>, <span class='va'>...</span>, .ragged <span class='op'>=</span> <span class='va'>.depth</span> <span class='op'>&lt;</span> <span class='fl'>0</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.x</th>
      <td><p>A list or atomic vector.</p></td>
    </tr>
    <tr>
      <th>.f</th>
      <td><p>A function, formula, or vector (not necessarily atomic).</p>
<p>If a <strong>function</strong>, it is used as is.</p>
<p>If a <strong>formula</strong>, e.g. <code>~ .x + 2</code>, it is converted to a function. There
are three ways to refer to the arguments:</p><ul>
<li><p>For a single argument function, use <code>.</code></p></li>
<li><p>For a two argument function, use <code>.x</code> and <code>.y</code></p></li>
<li><p>For more arguments, use <code>..1</code>, <code>..2</code>, <code>..3</code> etc</p></li>
</ul>

<p>This syntax allows you to create very compact anonymous
functions. Note that formula functions conceptually take dots
(that's why you can use <code>..1</code> etc). They silently ignore
additional arguments that are not used in the formula expression.</p>
<p>If <strong>character vector</strong>, <strong>numeric vector</strong>, or <strong>list</strong>, it is
converted to an extractor function. Character vectors index by
name and numeric vectors index by position; use a list to index
by position and name at different levels. If a component is not
present, the value of <code>.default</code> will be returned.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed on to the mapped function.</p></td>
    </tr>
    <tr>
      <th>.p</th>
      <td><p>A single predicate function, a formula describing such a
predicate function, or a logical vector of the same length as <code>.x</code>.
Alternatively, if the elements of <code>.x</code> are themselves lists of
objects, a string indicating the name of a logical element in the
inner lists. Only those elements where <code>.p</code> evaluates to
<code>TRUE</code> will be modified.</p></td>
    </tr>
    <tr>
      <th>.else</th>
      <td><p>A function applied to elements of <code>.x</code> for which <code>.p</code>
returns <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>.at</th>
      <td><p>A character vector of names, positive numeric vector of
positions to include, or a negative numeric vector of positions to
exlude. Only those elements corresponding to <code>.at</code> will be modified.
If the <code>tidyselect</code> package is installed, you can use <code><a href='https://dplyr.tidyverse.org/reference/vars.html'>vars()</a></code> and
the <code>tidyselect</code> helpers to select elements.</p></td>
    </tr>
    <tr>
      <th>.y</th>
      <td><p>Vectors of the same length. A vector of length 1 will
be recycled.</p></td>
    </tr>
    <tr>
      <th>.depth</th>
      <td><p>Level of <code>.x</code> to map on. Use a negative value to count up
from the lowest level of the list.</p><ul>
<li><p><code>modify_depth(x, 0, fun)</code> is equivalent to <code>x[] &lt;- fun(x)</code>.</p></li>
<li><p><code>modify_depth(x, 1, fun)</code> is equivalent to <code>x &lt;- modify(x, fun)</code></p></li>
<li><p><code>modify_depth(x, 2, fun)</code> is equivalent to <code>x &lt;- modify(x, ~ modify(., fun))</code></p></li>
</ul></td>
    </tr>
    <tr>
      <th>.ragged</th>
      <td><p>If <code>TRUE</code>, will apply to leaves, even if they're not
at depth <code>.depth</code>. If <code>FALSE</code>, will throw an error if there are
no elements at depth <code>.depth</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object the same class as <code>.x</code></p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Since the transformation can alter the structure of the input; it's
your responsibility to ensure that the transformation produces a
valid output. For example, if you're modifying a data frame, <code>.f</code>
must preserve the length of the input.</p>
    <h2 class="hasAnchor" id="genericity"><a class="anchor" href="#genericity"></a>Genericity</h2>

    


<p><code>modify()</code> and variants are generic over classes that implement
<code><a href='https://rdrr.io/r/base/length.html'>length()</a></code>, <code><a href='https://rdrr.io/r/base/Extract.html'>[[</a></code> and <code>[[&lt;-</code> methods. If the default implementation
is not compatible for your class, you can override them with your
own methods.</p>
<p>If you implement your own <code>modify()</code> method, make sure it satisfies
the following invariants:</p><pre>modify(x, identity) === x
modify(x, compose(f, g)) === modify(x, g) %&gt;% modify(f)
</pre>

<p>These invariants are known as the <a href='https://wiki.haskell.org/Functor#Functor_Laws'>functor laws</a> in computer
science.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other map variants: 
<code><a href='imap.html'>imap</a>()</code>,
<code><a href='invoke.html'>invoke</a>()</code>,
<code><a href='lmap.html'>lmap</a>()</code>,
<code><a href='map2.html'>map2</a>()</code>,
<code><a href='map_if.html'>map_if</a>()</code>,
<code><a href='map.html'>map</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Convert factors to characters</span>
<span class='va'>iris</span> <span class='op'>%&gt;%</span>
  <span class='fu'>modify_if</span><span class='op'>(</span><span class='va'>is.factor</span>, <span class='va'>as.character</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 'data.frame':	150 obs. of  5 variables:
#&gt;  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
#&gt;  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
#&gt;  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
#&gt;  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
#&gt;  $ Species     : chr  "setosa" "setosa" "setosa" "setosa" ...</div><div class='input'>
<span class='co'># Specify which columns to map with a numeric vector of positions:</span>
<span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>modify_at</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>4</span>, <span class='fl'>5</span><span class='op'>)</span>, <span class='va'>as.character</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 'data.frame':	32 obs. of  11 variables:
#&gt;  $ mpg : chr  "21" "21" "22.8" "21.4" ...
#&gt;  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
#&gt;  $ disp: num  160 160 108 258 360 ...
#&gt;  $ hp  : chr  "110" "110" "93" "110" ...
#&gt;  $ drat: chr  "3.9" "3.9" "3.85" "3.08" ...
#&gt;  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
#&gt;  $ qsec: num  16.5 17 18.6 19.4 17 ...
#&gt;  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
#&gt;  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
#&gt;  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
#&gt;  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</div><div class='input'>
<span class='co'># Or with a vector of names:</span>
<span class='va'>mtcars</span> <span class='op'>%&gt;%</span> <span class='fu'>modify_at</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cyl"</span>, <span class='st'>"am"</span><span class='op'>)</span>, <span class='va'>as.character</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 'data.frame':	32 obs. of  11 variables:
#&gt;  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
#&gt;  $ cyl : chr  "6" "6" "4" "6" ...
#&gt;  $ disp: num  160 160 108 258 360 ...
#&gt;  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
#&gt;  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
#&gt;  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
#&gt;  $ qsec: num  16.5 17 18.6 19.4 17 ...
#&gt;  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
#&gt;  $ am  : chr  "1" "1" "1" "0" ...
#&gt;  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
#&gt;  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='rbernoulli.html'>rbernoulli</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='transpose.html'>transpose</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>modify_if</span><span class='op'>(</span><span class='st'>"x"</span>, <span class='op'>~</span> <span class='fu'><a href='list_modify.html'>update_list</a></span><span class='op'>(</span><span class='va'>.</span>, y <span class='op'>=</span> <span class='op'>~</span> <span class='va'>y</span> <span class='op'>*</span> <span class='fl'>100</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='transpose.html'>transpose</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='as_vector.html'>simplify_all</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $x
#&gt;   [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
#&gt;  [13] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
#&gt;  [25] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE
#&gt;  [37] FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE
#&gt;  [49] FALSE  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE
#&gt;  [61]  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE  TRUE FALSE
#&gt;  [73]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE
#&gt;  [85] FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE
#&gt;  [97]  TRUE  TRUE FALSE FALSE
#&gt; 
#&gt; $y
#&gt;   [1]    1    2    3    4  500    6    7    8    9   10   11   12   13   14   15
#&gt;  [16] 1600   17   18   19 2000   21   22   23   24   25 2600   27 2800   29 3000
#&gt;  [31]   31   32 3300 3400   35   36   37 3800 3900 4000   41   42   43   44   45
#&gt;  [46]   46 4700 4800   49 5000   51 5200   53   54 5500 5600 5700 5800   59   60
#&gt;  [61] 6100 6200   63   64 6500 6600 6700   68 6900   70 7100   72 7300 7400 7500
#&gt;  [76] 7600 7700   78   79   80   81 8200 8300   84   85 8600   87 8800 8900   90
#&gt;  [91]   91   92 9300 9400 9500   96 9700 9800   99  100
#&gt; </div><div class='input'>
<span class='co'># Use modify2() to map over two vectors and preserve the type of</span>
<span class='co'># the first one:</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>foo <span class='op'>=</span> <span class='fl'>1L</span>, bar <span class='op'>=</span> <span class='fl'>2L</span><span class='op'>)</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'>modify2</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='op'>~</span> <span class='kw'>if</span> <span class='op'>(</span><span class='va'>.y</span><span class='op'>)</span> <span class='va'>.x</span> <span class='kw'>else</span> <span class='fl'>0L</span><span class='op'>)</span>
</div><div class='output co'>#&gt; foo bar 
#&gt;   1   0 </div><div class='input'>
<span class='co'># Use a predicate function to decide whether to map a function:</span>
<span class='fu'>modify_if</span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>is.factor</span>, <span class='va'>as.character</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
#&gt; 1            5.1         3.5          1.4         0.2     setosa
#&gt; 2            4.9         3.0          1.4         0.2     setosa
#&gt; 3            4.7         3.2          1.3         0.2     setosa
#&gt; 4            4.6         3.1          1.5         0.2     setosa
#&gt; 5            5.0         3.6          1.4         0.2     setosa
#&gt; 6            5.4         3.9          1.7         0.4     setosa
#&gt; 7            4.6         3.4          1.4         0.3     setosa
#&gt; 8            5.0         3.4          1.5         0.2     setosa
#&gt; 9            4.4         2.9          1.4         0.2     setosa
#&gt; 10           4.9         3.1          1.5         0.1     setosa
#&gt; 11           5.4         3.7          1.5         0.2     setosa
#&gt; 12           4.8         3.4          1.6         0.2     setosa
#&gt; 13           4.8         3.0          1.4         0.1     setosa
#&gt; 14           4.3         3.0          1.1         0.1     setosa
#&gt; 15           5.8         4.0          1.2         0.2     setosa
#&gt; 16           5.7         4.4          1.5         0.4     setosa
#&gt; 17           5.4         3.9          1.3         0.4     setosa
#&gt; 18           5.1         3.5          1.4         0.3     setosa
#&gt; 19           5.7         3.8          1.7         0.3     setosa
#&gt; 20           5.1         3.8          1.5         0.3     setosa
#&gt; 21           5.4         3.4          1.7         0.2     setosa
#&gt; 22           5.1         3.7          1.5         0.4     setosa
#&gt; 23           4.6         3.6          1.0         0.2     setosa
#&gt; 24           5.1         3.3          1.7         0.5     setosa
#&gt; 25           4.8         3.4          1.9         0.2     setosa
#&gt; 26           5.0         3.0          1.6         0.2     setosa
#&gt; 27           5.0         3.4          1.6         0.4     setosa
#&gt; 28           5.2         3.5          1.5         0.2     setosa
#&gt; 29           5.2         3.4          1.4         0.2     setosa
#&gt; 30           4.7         3.2          1.6         0.2     setosa
#&gt; 31           4.8         3.1          1.6         0.2     setosa
#&gt; 32           5.4         3.4          1.5         0.4     setosa
#&gt; 33           5.2         4.1          1.5         0.1     setosa
#&gt; 34           5.5         4.2          1.4         0.2     setosa
#&gt; 35           4.9         3.1          1.5         0.2     setosa
#&gt; 36           5.0         3.2          1.2         0.2     setosa
#&gt; 37           5.5         3.5          1.3         0.2     setosa
#&gt; 38           4.9         3.6          1.4         0.1     setosa
#&gt; 39           4.4         3.0          1.3         0.2     setosa
#&gt; 40           5.1         3.4          1.5         0.2     setosa
#&gt; 41           5.0         3.5          1.3         0.3     setosa
#&gt; 42           4.5         2.3          1.3         0.3     setosa
#&gt; 43           4.4         3.2          1.3         0.2     setosa
#&gt; 44           5.0         3.5          1.6         0.6     setosa
#&gt; 45           5.1         3.8          1.9         0.4     setosa
#&gt; 46           4.8         3.0          1.4         0.3     setosa
#&gt; 47           5.1         3.8          1.6         0.2     setosa
#&gt; 48           4.6         3.2          1.4         0.2     setosa
#&gt; 49           5.3         3.7          1.5         0.2     setosa
#&gt; 50           5.0         3.3          1.4         0.2     setosa
#&gt; 51           7.0         3.2          4.7         1.4 versicolor
#&gt; 52           6.4         3.2          4.5         1.5 versicolor
#&gt; 53           6.9         3.1          4.9         1.5 versicolor
#&gt; 54           5.5         2.3          4.0         1.3 versicolor
#&gt; 55           6.5         2.8          4.6         1.5 versicolor
#&gt; 56           5.7         2.8          4.5         1.3 versicolor
#&gt; 57           6.3         3.3          4.7         1.6 versicolor
#&gt; 58           4.9         2.4          3.3         1.0 versicolor
#&gt; 59           6.6         2.9          4.6         1.3 versicolor
#&gt; 60           5.2         2.7          3.9         1.4 versicolor
#&gt; 61           5.0         2.0          3.5         1.0 versicolor
#&gt; 62           5.9         3.0          4.2         1.5 versicolor
#&gt; 63           6.0         2.2          4.0         1.0 versicolor
#&gt; 64           6.1         2.9          4.7         1.4 versicolor
#&gt; 65           5.6         2.9          3.6         1.3 versicolor
#&gt; 66           6.7         3.1          4.4         1.4 versicolor
#&gt; 67           5.6         3.0          4.5         1.5 versicolor
#&gt; 68           5.8         2.7          4.1         1.0 versicolor
#&gt; 69           6.2         2.2          4.5         1.5 versicolor
#&gt; 70           5.6         2.5          3.9         1.1 versicolor
#&gt; 71           5.9         3.2          4.8         1.8 versicolor
#&gt; 72           6.1         2.8          4.0         1.3 versicolor
#&gt; 73           6.3         2.5          4.9         1.5 versicolor
#&gt; 74           6.1         2.8          4.7         1.2 versicolor
#&gt; 75           6.4         2.9          4.3         1.3 versicolor
#&gt; 76           6.6         3.0          4.4         1.4 versicolor
#&gt; 77           6.8         2.8          4.8         1.4 versicolor
#&gt; 78           6.7         3.0          5.0         1.7 versicolor
#&gt; 79           6.0         2.9          4.5         1.5 versicolor
#&gt; 80           5.7         2.6          3.5         1.0 versicolor
#&gt; 81           5.5         2.4          3.8         1.1 versicolor
#&gt; 82           5.5         2.4          3.7         1.0 versicolor
#&gt; 83           5.8         2.7          3.9         1.2 versicolor
#&gt; 84           6.0         2.7          5.1         1.6 versicolor
#&gt; 85           5.4         3.0          4.5         1.5 versicolor
#&gt; 86           6.0         3.4          4.5         1.6 versicolor
#&gt; 87           6.7         3.1          4.7         1.5 versicolor
#&gt; 88           6.3         2.3          4.4         1.3 versicolor
#&gt; 89           5.6         3.0          4.1         1.3 versicolor
#&gt; 90           5.5         2.5          4.0         1.3 versicolor
#&gt; 91           5.5         2.6          4.4         1.2 versicolor
#&gt; 92           6.1         3.0          4.6         1.4 versicolor
#&gt; 93           5.8         2.6          4.0         1.2 versicolor
#&gt; 94           5.0         2.3          3.3         1.0 versicolor
#&gt; 95           5.6         2.7          4.2         1.3 versicolor
#&gt; 96           5.7         3.0          4.2         1.2 versicolor
#&gt; 97           5.7         2.9          4.2         1.3 versicolor
#&gt; 98           6.2         2.9          4.3         1.3 versicolor
#&gt; 99           5.1         2.5          3.0         1.1 versicolor
#&gt; 100          5.7         2.8          4.1         1.3 versicolor
#&gt; 101          6.3         3.3          6.0         2.5  virginica
#&gt; 102          5.8         2.7          5.1         1.9  virginica
#&gt; 103          7.1         3.0          5.9         2.1  virginica
#&gt; 104          6.3         2.9          5.6         1.8  virginica
#&gt; 105          6.5         3.0          5.8         2.2  virginica
#&gt; 106          7.6         3.0          6.6         2.1  virginica
#&gt; 107          4.9         2.5          4.5         1.7  virginica
#&gt; 108          7.3         2.9          6.3         1.8  virginica
#&gt; 109          6.7         2.5          5.8         1.8  virginica
#&gt; 110          7.2         3.6          6.1         2.5  virginica
#&gt; 111          6.5         3.2          5.1         2.0  virginica
#&gt; 112          6.4         2.7          5.3         1.9  virginica
#&gt; 113          6.8         3.0          5.5         2.1  virginica
#&gt; 114          5.7         2.5          5.0         2.0  virginica
#&gt; 115          5.8         2.8          5.1         2.4  virginica
#&gt; 116          6.4         3.2          5.3         2.3  virginica
#&gt; 117          6.5         3.0          5.5         1.8  virginica
#&gt; 118          7.7         3.8          6.7         2.2  virginica
#&gt; 119          7.7         2.6          6.9         2.3  virginica
#&gt; 120          6.0         2.2          5.0         1.5  virginica
#&gt; 121          6.9         3.2          5.7         2.3  virginica
#&gt; 122          5.6         2.8          4.9         2.0  virginica
#&gt; 123          7.7         2.8          6.7         2.0  virginica
#&gt; 124          6.3         2.7          4.9         1.8  virginica
#&gt; 125          6.7         3.3          5.7         2.1  virginica
#&gt; 126          7.2         3.2          6.0         1.8  virginica
#&gt; 127          6.2         2.8          4.8         1.8  virginica
#&gt; 128          6.1         3.0          4.9         1.8  virginica
#&gt; 129          6.4         2.8          5.6         2.1  virginica
#&gt; 130          7.2         3.0          5.8         1.6  virginica
#&gt; 131          7.4         2.8          6.1         1.9  virginica
#&gt; 132          7.9         3.8          6.4         2.0  virginica
#&gt; 133          6.4         2.8          5.6         2.2  virginica
#&gt; 134          6.3         2.8          5.1         1.5  virginica
#&gt; 135          6.1         2.6          5.6         1.4  virginica
#&gt; 136          7.7         3.0          6.1         2.3  virginica
#&gt; 137          6.3         3.4          5.6         2.4  virginica
#&gt; 138          6.4         3.1          5.5         1.8  virginica
#&gt; 139          6.0         3.0          4.8         1.8  virginica
#&gt; 140          6.9         3.1          5.4         2.1  virginica
#&gt; 141          6.7         3.1          5.6         2.4  virginica
#&gt; 142          6.9         3.1          5.1         2.3  virginica
#&gt; 143          5.8         2.7          5.1         1.9  virginica
#&gt; 144          6.8         3.2          5.9         2.3  virginica
#&gt; 145          6.7         3.3          5.7         2.5  virginica
#&gt; 146          6.7         3.0          5.2         2.3  virginica
#&gt; 147          6.3         2.5          5.0         1.9  virginica
#&gt; 148          6.5         3.0          5.2         2.0  virginica
#&gt; 149          6.2         3.4          5.4         2.3  virginica
#&gt; 150          5.9         3.0          5.1         1.8  virginica</div><div class='input'>
<span class='co'># Specify an alternative with the `.else` argument:</span>
<span class='fu'>modify_if</span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>is.factor</span>, <span class='va'>as.character</span>, .else <span class='op'>=</span> <span class='va'>as.integer</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
#&gt; 1              5           3            1           0     setosa
#&gt; 2              4           3            1           0     setosa
#&gt; 3              4           3            1           0     setosa
#&gt; 4              4           3            1           0     setosa
#&gt; 5              5           3            1           0     setosa
#&gt; 6              5           3            1           0     setosa
#&gt; 7              4           3            1           0     setosa
#&gt; 8              5           3            1           0     setosa
#&gt; 9              4           2            1           0     setosa
#&gt; 10             4           3            1           0     setosa
#&gt; 11             5           3            1           0     setosa
#&gt; 12             4           3            1           0     setosa
#&gt; 13             4           3            1           0     setosa
#&gt; 14             4           3            1           0     setosa
#&gt; 15             5           4            1           0     setosa
#&gt; 16             5           4            1           0     setosa
#&gt; 17             5           3            1           0     setosa
#&gt; 18             5           3            1           0     setosa
#&gt; 19             5           3            1           0     setosa
#&gt; 20             5           3            1           0     setosa
#&gt; 21             5           3            1           0     setosa
#&gt; 22             5           3            1           0     setosa
#&gt; 23             4           3            1           0     setosa
#&gt; 24             5           3            1           0     setosa
#&gt; 25             4           3            1           0     setosa
#&gt; 26             5           3            1           0     setosa
#&gt; 27             5           3            1           0     setosa
#&gt; 28             5           3            1           0     setosa
#&gt; 29             5           3            1           0     setosa
#&gt; 30             4           3            1           0     setosa
#&gt; 31             4           3            1           0     setosa
#&gt; 32             5           3            1           0     setosa
#&gt; 33             5           4            1           0     setosa
#&gt; 34             5           4            1           0     setosa
#&gt; 35             4           3            1           0     setosa
#&gt; 36             5           3            1           0     setosa
#&gt; 37             5           3            1           0     setosa
#&gt; 38             4           3            1           0     setosa
#&gt; 39             4           3            1           0     setosa
#&gt; 40             5           3            1           0     setosa
#&gt; 41             5           3            1           0     setosa
#&gt; 42             4           2            1           0     setosa
#&gt; 43             4           3            1           0     setosa
#&gt; 44             5           3            1           0     setosa
#&gt; 45             5           3            1           0     setosa
#&gt; 46             4           3            1           0     setosa
#&gt; 47             5           3            1           0     setosa
#&gt; 48             4           3            1           0     setosa
#&gt; 49             5           3            1           0     setosa
#&gt; 50             5           3            1           0     setosa
#&gt; 51             7           3            4           1 versicolor
#&gt; 52             6           3            4           1 versicolor
#&gt; 53             6           3            4           1 versicolor
#&gt; 54             5           2            4           1 versicolor
#&gt; 55             6           2            4           1 versicolor
#&gt; 56             5           2            4           1 versicolor
#&gt; 57             6           3            4           1 versicolor
#&gt; 58             4           2            3           1 versicolor
#&gt; 59             6           2            4           1 versicolor
#&gt; 60             5           2            3           1 versicolor
#&gt; 61             5           2            3           1 versicolor
#&gt; 62             5           3            4           1 versicolor
#&gt; 63             6           2            4           1 versicolor
#&gt; 64             6           2            4           1 versicolor
#&gt; 65             5           2            3           1 versicolor
#&gt; 66             6           3            4           1 versicolor
#&gt; 67             5           3            4           1 versicolor
#&gt; 68             5           2            4           1 versicolor
#&gt; 69             6           2            4           1 versicolor
#&gt; 70             5           2            3           1 versicolor
#&gt; 71             5           3            4           1 versicolor
#&gt; 72             6           2            4           1 versicolor
#&gt; 73             6           2            4           1 versicolor
#&gt; 74             6           2            4           1 versicolor
#&gt; 75             6           2            4           1 versicolor
#&gt; 76             6           3            4           1 versicolor
#&gt; 77             6           2            4           1 versicolor
#&gt; 78             6           3            5           1 versicolor
#&gt; 79             6           2            4           1 versicolor
#&gt; 80             5           2            3           1 versicolor
#&gt; 81             5           2            3           1 versicolor
#&gt; 82             5           2            3           1 versicolor
#&gt; 83             5           2            3           1 versicolor
#&gt; 84             6           2            5           1 versicolor
#&gt; 85             5           3            4           1 versicolor
#&gt; 86             6           3            4           1 versicolor
#&gt; 87             6           3            4           1 versicolor
#&gt; 88             6           2            4           1 versicolor
#&gt; 89             5           3            4           1 versicolor
#&gt; 90             5           2            4           1 versicolor
#&gt; 91             5           2            4           1 versicolor
#&gt; 92             6           3            4           1 versicolor
#&gt; 93             5           2            4           1 versicolor
#&gt; 94             5           2            3           1 versicolor
#&gt; 95             5           2            4           1 versicolor
#&gt; 96             5           3            4           1 versicolor
#&gt; 97             5           2            4           1 versicolor
#&gt; 98             6           2            4           1 versicolor
#&gt; 99             5           2            3           1 versicolor
#&gt; 100            5           2            4           1 versicolor
#&gt; 101            6           3            6           2  virginica
#&gt; 102            5           2            5           1  virginica
#&gt; 103            7           3            5           2  virginica
#&gt; 104            6           2            5           1  virginica
#&gt; 105            6           3            5           2  virginica
#&gt; 106            7           3            6           2  virginica
#&gt; 107            4           2            4           1  virginica
#&gt; 108            7           2            6           1  virginica
#&gt; 109            6           2            5           1  virginica
#&gt; 110            7           3            6           2  virginica
#&gt; 111            6           3            5           2  virginica
#&gt; 112            6           2            5           1  virginica
#&gt; 113            6           3            5           2  virginica
#&gt; 114            5           2            5           2  virginica
#&gt; 115            5           2            5           2  virginica
#&gt; 116            6           3            5           2  virginica
#&gt; 117            6           3            5           1  virginica
#&gt; 118            7           3            6           2  virginica
#&gt; 119            7           2            6           2  virginica
#&gt; 120            6           2            5           1  virginica
#&gt; 121            6           3            5           2  virginica
#&gt; 122            5           2            4           2  virginica
#&gt; 123            7           2            6           2  virginica
#&gt; 124            6           2            4           1  virginica
#&gt; 125            6           3            5           2  virginica
#&gt; 126            7           3            6           1  virginica
#&gt; 127            6           2            4           1  virginica
#&gt; 128            6           3            4           1  virginica
#&gt; 129            6           2            5           2  virginica
#&gt; 130            7           3            5           1  virginica
#&gt; 131            7           2            6           1  virginica
#&gt; 132            7           3            6           2  virginica
#&gt; 133            6           2            5           2  virginica
#&gt; 134            6           2            5           1  virginica
#&gt; 135            6           2            5           1  virginica
#&gt; 136            7           3            6           2  virginica
#&gt; 137            6           3            5           2  virginica
#&gt; 138            6           3            5           1  virginica
#&gt; 139            6           3            4           1  virginica
#&gt; 140            6           3            5           2  virginica
#&gt; 141            6           3            5           2  virginica
#&gt; 142            6           3            5           2  virginica
#&gt; 143            5           2            5           1  virginica
#&gt; 144            6           3            5           2  virginica
#&gt; 145            6           3            5           2  virginica
#&gt; 146            6           3            5           2  virginica
#&gt; 147            6           2            5           1  virginica
#&gt; 148            6           3            5           2  virginica
#&gt; 149            6           3            5           2  virginica
#&gt; 150            5           3            5           1  virginica</div><div class='input'>

<span class='co'># Modify at specified depth ---------------------------</span>
<span class='va'>l1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  obj1 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    prop1 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>param1 <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>, param2 <span class='op'>=</span> <span class='fl'>3</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span>,
    prop2 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>param1 <span class='op'>=</span> <span class='fl'>5</span><span class='op'>:</span><span class='fl'>6</span>, param2 <span class='op'>=</span> <span class='fl'>7</span><span class='op'>:</span><span class='fl'>8</span><span class='op'>)</span>
  <span class='op'>)</span>,
  obj2 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    prop1 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>param1 <span class='op'>=</span> <span class='fl'>9</span><span class='op'>:</span><span class='fl'>10</span>, param2 <span class='op'>=</span> <span class='fl'>11</span><span class='op'>:</span><span class='fl'>12</span><span class='op'>)</span>,
    prop2 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>param1 <span class='op'>=</span> <span class='fl'>12</span><span class='op'>:</span><span class='fl'>14</span>, param2 <span class='op'>=</span> <span class='fl'>15</span><span class='op'>:</span><span class='fl'>17</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># In the above list, "obj" is level 1, "prop" is level 2 and "param"</span>
<span class='co'># is level 3. To apply sum() on all params, we map it at depth 3:</span>
<span class='va'>l1</span> <span class='op'>%&gt;%</span> <span class='fu'>modify_depth</span><span class='op'>(</span><span class='fl'>3</span>, <span class='va'>sum</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; List of 2
#&gt;  $ obj1:List of 2
#&gt;   ..$ prop1:List of 2
#&gt;   .. ..$ param1: int 3
#&gt;   .. ..$ param2: int 7
#&gt;   ..$ prop2:List of 2
#&gt;   .. ..$ param1: int 11
#&gt;   .. ..$ param2: int 15
#&gt;  $ obj2:List of 2
#&gt;   ..$ prop1:List of 2
#&gt;   .. ..$ param1: int 19
#&gt;   .. ..$ param2: int 23
#&gt;   ..$ prop2:List of 2
#&gt;   .. ..$ param1: int 39
#&gt;   .. ..$ param2: int 48</div><div class='input'>
<span class='co'># Note that vectorised operations will yield the same result when</span>
<span class='co'># applied at the list level as when applied at the atomic result.</span>
<span class='co'># The former is more efficient because it takes advantage of</span>
<span class='co'># vectorisation.</span>
<span class='va'>l1</span> <span class='op'>%&gt;%</span> <span class='fu'>modify_depth</span><span class='op'>(</span><span class='fl'>3</span>, <span class='va'>`+`</span>, <span class='fl'>100L</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $obj1
#&gt; $obj1$prop1
#&gt; $obj1$prop1$param1
#&gt; [1] 101 102
#&gt; 
#&gt; $obj1$prop1$param2
#&gt; [1] 103 104
#&gt; 
#&gt; 
#&gt; $obj1$prop2
#&gt; $obj1$prop2$param1
#&gt; [1] 105 106
#&gt; 
#&gt; $obj1$prop2$param2
#&gt; [1] 107 108
#&gt; 
#&gt; 
#&gt; 
#&gt; $obj2
#&gt; $obj2$prop1
#&gt; $obj2$prop1$param1
#&gt; [1] 109 110
#&gt; 
#&gt; $obj2$prop1$param2
#&gt; [1] 111 112
#&gt; 
#&gt; 
#&gt; $obj2$prop2
#&gt; $obj2$prop2$param1
#&gt; [1] 112 113 114
#&gt; 
#&gt; $obj2$prop2$param2
#&gt; [1] 115 116 117
#&gt; 
#&gt; 
#&gt; </div><div class='input'><span class='va'>l1</span> <span class='op'>%&gt;%</span> <span class='fu'>modify_depth</span><span class='op'>(</span><span class='fl'>4</span>, <span class='va'>`+`</span>, <span class='fl'>100L</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $obj1
#&gt; $obj1$prop1
#&gt; $obj1$prop1$param1
#&gt; [1] 101 102
#&gt; 
#&gt; $obj1$prop1$param2
#&gt; [1] 103 104
#&gt; 
#&gt; 
#&gt; $obj1$prop2
#&gt; $obj1$prop2$param1
#&gt; [1] 105 106
#&gt; 
#&gt; $obj1$prop2$param2
#&gt; [1] 107 108
#&gt; 
#&gt; 
#&gt; 
#&gt; $obj2
#&gt; $obj2$prop1
#&gt; $obj2$prop1$param1
#&gt; [1] 109 110
#&gt; 
#&gt; $obj2$prop1$param2
#&gt; [1] 111 112
#&gt; 
#&gt; 
#&gt; $obj2$prop2
#&gt; $obj2$prop2$param1
#&gt; [1] 112 113 114
#&gt; 
#&gt; $obj2$prop2$param2
#&gt; [1] 115 116 117
#&gt; 
#&gt; 
#&gt; </div><div class='input'>
<span class='co'># modify() lets us pluck the elements prop1/param2 in obj1 and obj2:</span>
<span class='va'>l1</span> <span class='op'>%&gt;%</span> <span class='fu'>modify</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"prop1"</span>, <span class='st'>"param2"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; List of 2
#&gt;  $ obj1: int [1:2] 3 4
#&gt;  $ obj2: int [1:2] 11 12</div><div class='input'>
<span class='co'># But what if we want to pluck all param2 elements? Then we need to</span>
<span class='co'># act at a lower level:</span>
<span class='va'>l1</span> <span class='op'>%&gt;%</span> <span class='fu'>modify_depth</span><span class='op'>(</span><span class='fl'>2</span>, <span class='st'>"param2"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; List of 2
#&gt;  $ obj1:List of 2
#&gt;   ..$ prop1: int [1:2] 3 4
#&gt;   ..$ prop2: int [1:2] 7 8
#&gt;  $ obj2:List of 2
#&gt;   ..$ prop1: int [1:2] 11 12
#&gt;   ..$ prop2: int [1:3] 15 16 17</div><div class='input'>
<span class='co'># modify_depth() can be with other purrr functions to make them operate at</span>
<span class='co'># a lower level. Here we ask pmap() to map paste() simultaneously over all</span>
<span class='co'># elements of the objects at the second level. paste() is effectively</span>
<span class='co'># mapped at level 3.</span>
<span class='va'>l1</span> <span class='op'>%&gt;%</span> <span class='fu'>modify_depth</span><span class='op'>(</span><span class='fl'>2</span>, <span class='op'>~</span> <span class='fu'><a href='map2.html'>pmap</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='va'>paste</span>, sep <span class='op'>=</span> <span class='st'>" / "</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; List of 2
#&gt;  $ obj1:List of 2
#&gt;   ..$ prop1:List of 2
#&gt;   .. ..$ : chr "1 / 3"
#&gt;   .. ..$ : chr "2 / 4"
#&gt;   ..$ prop2:List of 2
#&gt;   .. ..$ : chr "5 / 7"
#&gt;   .. ..$ : chr "6 / 8"
#&gt;  $ obj2:List of 2
#&gt;   ..$ prop1:List of 2
#&gt;   .. ..$ : chr "9 / 11"
#&gt;   .. ..$ : chr "10 / 12"
#&gt;   ..$ prop2:List of 3
#&gt;   .. ..$ : chr "12 / 15"
#&gt;   .. ..$ : chr "13 / 16"
#&gt;   .. ..$ : chr "14 / 17"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>purrr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Lionel Henry, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  


  </body>
</html>


